{"version":3,"sources":["routes/build-view/build-hash-selector.jsx","components/lhr-viewer-button.jsx","routes/build-view/build-selector-header-section.jsx","routes/build-view/build-view-warnings.jsx","../../../../node_modules/@lhci/utils/src/markdown.js","components/markdown.jsx","routes/build-view/audit-detail/simple-details.jsx","routes/build-view/audit-detail/table-details.jsx","routes/build-view/audit-list/numeric-diff.jsx","routes/build-view/audit-list/audit-diff.jsx","routes/build-view/audit-detail/audit-detail.jsx","routes/build-view/audit-detail/audit-detail-pane.jsx","components/pwa-gauge.jsx","routes/build-view/lhr-comparison-scores.jsx","routes/build-view/audit-list/audit-group.jsx","routes/build-view/lhr-comparison-legend.jsx","../src/index.js","../../src/util.js","../src/suspense.js","components/modal.jsx","routes/build-view/lhr-comparison-runtime-diff.jsx","routes/build-view/lhr-comparison.jsx","routes/build-view/build-view.jsx"],"names":["GitViz","props","branch","withDevLine","withNode","withDevBranchArc","baseBranch","LabelLineItem","variant","BuildLink","build","externalBuildUrl","GitHubLink","URL","host","includes","org","repo","pathname","split","filter","Boolean","hash","err","BuildLineItem","compareBuild","baseBuild","selector","isCompareBranch","id","isBaseBranch","isSelected","url","window","location","href","searchParams","set","delete","replace","_","shortId","slice","commitMessage","BuildHashSelector_","branchBuilds","baseBuilds","builds","uniqBy","concat","sort","a","b","Date","runAt","getTime","indexOfLastDev","length","reverse","findIndex","listener","evt","target","HTMLElement","closest","close","document","addEventListener","removeEventListener","map","index","ancestorBuild","BuildHashSelector","branchLoadingData","projectId","limit","baseLoadingData","LH_ICON_PATH","require","LhrViewerButton","lhr","label","Selection","BuildSelectorHeaderSection","isOpen","isDimmed","onClick","setLhrLinkHover","computeWarnings","baseLhr","hasBaseOverride","missingBase","missingBaseLhr","baseAndCompareAreSame","missingAncestor","ancestorHash","hasWarning","BuildViewWarnings","warnings","lhrLinkEl","Markdown","segments","text","segment","i","isLink","linkHref","origin","SimpleDetails","type","compareValue","baseValue","diff","value","undefined","numericBase","Number","isFinite","numericCompare","baseDisplay","Math","round","toLocaleString","compareDisplay","numericTitle","deltaPercent","percentAbsoluteDelta","maximumFractionDigits","kb","abs","ms","width","height","objectFit","img","srcElement","HTMLImageElement","onerror","src","display","hostname","snippet","JSON","stringify","line","column","debugdata","isNumericValueType","itemType","TableDetails","audit","baseAudit","diffs","allDiffs","pair","details","headings","compareHeadings","items","compareItems","baseHeadings","baseItems","zippedItems","sortedItems","insertRowLabelAfterIndex","heading","valueType","base","compare","key","state","j","find","itemKey","item","BIG_PICTURE_LIMITS","interactive","__default__","getBigPictureLimit","limitType","auditId","limits","toNearestRoundNumber","x","direction","fn","ceil","floor","getUnitFromAudit","groupId","overallSavingsMs","displayValue","test","toDisplay","options","asDelta","withSuffix","unit","fractionDigits","suffixUnit","preventSecondsConversion","string","minimumFractionDigits","numericSign","resultStr","element","NumericDiff","currentNumericValue","baseNumericValue","delta","minValue","min","maxValue","max","lowerLimit","showAsBigPicture","upperLimit","range","boxLeft","boxRight","deltaType","minValueIsCurrentValue","hoverDisplay","showAsNarrow","deltaLabel","deltaLabelLength","narrowCutoffThresholdInPercent","left","right","ICONS_BY_AUDIT_ID","deprecations","IconForAuditItems","icon","ScoreDiff","DisplayValueDiff","getDiffLabelForRowLabel","rowLabel","getUniqueBaseCompareIndexPairs","baseItemIndex","compareItemIndex","indexes","idx","ItemDiff","baseAuditItems","rowLabels","regressionCount","improvementCount","baseElements","NoBaseAudit","ErrorDiff","message","scoreDisplayMode","errorMessage","AuditDiff","group","noDiffAvailable","errorDiff","numericDiff","hasItemDiff","some","scoreDiff","displayValueDiff","ScoreOnlyDetails","ErrorDetails","erroredAudit","Details","baseDetails","hasItems","itemDiff","tableDetails","numericDetails","AuditDetail","score","title","description","AuditDetailPane","paneElementRef","previouslySelectedAuditId","selectedAuditId","paneElement","current","childElement","querySelector","scrollTo","offsetTop","el","setSelectedAuditId","pairs","FastReliableIcon","InstallableIcon","OptimizedIcon","getBadgeDiffType","getBadgeStatus","pwaCategory","categories","pwa","auditsByCategory","groupIntoMap","auditRefs","ref","hasEveryPass","refs","audits","every","optimized","get","installable","fastAndReliable","PWAGauge","status","all","StandardScoreItem","categoryId","category","baseCategory","PwaScoreItem","compareStatus","deltaEl","baseStatus","diffTypes","allEqual","Object","values","individualBadges","overallStatus","LhrComparisonScores","categoryIds","keys","idA","idB","sortKeyA","Infinity","indexOf","MetricsTabHeader","setShowAsBigPicture","ChangedAuditList","UnchangedAuditList","expanded","e","preventDefault","stopPropagation","AuditGroup","setExpanded","showAsUnchanged","LhrComparisonLegend","removeNode","node","parentNode","removeChild","const","oldCatchError","_catchError","Suspense","_suspensions","lazy","loader","prom","component","error","Lazy","then","exports","default","createElement","displayName","_forwarded","newVNode","oldVNode","vnode","_parent","_component","_childDidSuspend","_dom","_children","prototype","Component","promise","c","this","push","onSuspensionComplete","pop","unmount","fallback","_vnode","_parkedChildren","setState","detachDom","children","let","child","render","version","REACT_ELEMENT_TYPE","Symbol","for","CAMEL_PROPS","oldEventHook","event","createFactory","bind","parent","callback","firstChild","preactRender","persist","nativeEvent","ContextProvider","Portal","_this","container","wrap","h","context","_container","_temp","_unmount","_wrap","_hasMounted","createTextNode","hydrate","appendChild","componentWillUnmount","createPortal","getChildContext","mapFn","toChildArray","Children","forEach","count","only","Error","toArray","args","defaultValue","Array","isArray","multiple","selected","shouldSanitize","attrs","toLowerCase","preactCompatNormalized","normalizeVNode","class","className","classNameDescriptor","enumerable","defineProperty","cloneElement","isValidElement","preactCloneElement","apply","arguments","$$typeof","unmountComponentAtNode","configurable","shallowDiffers","findDOMNode","nodeType","PureComponent","constructor","isPureReactComponent","shouldComponentUpdate","memo","comparer","shouldUpdate","nextProps","updateRef","call","Memoed","obj","isReactComponent","name","forwardRef","Forwarded","setSafeDescriptor","proto","v","oldVNodeHook","newProps","ondoubleclick","ondblclick","onbeforeinput","onchange","normalized","oninput","_patchedLifecycles","unstable_batchedUpdates","arg","useState","useReducer","useEffect","useLayoutEffect","useRef","useImperativeHandle","useMemo","useCallback","useContext","useDebugValue","createContext","createRef","Fragment","Modal","modalRootRef","getElementById","body","position","onClose","getStringValueFromRawConfigSetting","toString","join","computeRuntimeDiffs","benchmarkIndex","environment","baseBenchmarkIndex","benchmarkMultiplicativeDelta","severity","settings","configSettings","baseSettings","throttling","baseThrottling","potentialDiffs","lighthouseVersion","disableStorageReset","emulatedFormFactor","throttlingMethod","cpuSlowdownMultiplier","rttMs","throughputKbps","requestLatencyMs","uploadThroughputKbps","downloadThroughputKbps","rawBase","rawCompare","LhrRuntimeDiff","useAuditPermalinkScrollOnLoad","setAuditId","wait","Promise","r","setTimeout","resolve","attempts","waitUntilSelector","computeAuditGroups","auditGroups","entries","categoryAsGroup","auditRefsGroupedByGroup","groupBy","unchangedAuditsGroupId","unchangedAuditsGroup","auditRefGroup","groupWithoutId","categoryGroups","synthesizeItemKeyDiffs","maxSeverity","getDiffSeverity","pairsWithDiffs","pairsWithoutDiffs","LhrComparisonScoresAndUrl","hookElements","dropdowns","percentAbsoluteDeltaThreshold","setPercentAbsoluteDeltaThreshold","AuditGroups","auditGroup","LhrComparison","setDiffThreshold","runtimeDiffAck","setRuntimeDiffAck","defaultAck","__LHR__","__BASE_LHR__","runtimeDiffs","runtimeDiffsHaveError","reduce","computeSelectedUrl","compareRuns","compareUrl","fallbackUrl","urlsInBothRuns","runs","run","Set","entry","buildId","size","BuildView_","openBuildHash","setOpenBuild","isOpenLhrLinkHovered","buildHashSelectorCloseFn","selectedUrl","availableUrls","ancestorBuildId","baseRun","lhrError","parse","definedLhr","warningProps","project","slug","stack","to","search","BuildView","projectLoadingData","projectSlug","buildLoadingData","partialBuildId","ancestorBuildData","baseOverrideOptions","baseOverrideData","baseBuildData","baseBuildId","runData","baseRunData","baseRuns"],"mappings":"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","file":"build-view.d34b55ae.js","sourceRoot":"../src/ui","sourcesContent":["/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport clsx from 'clsx';\nimport * as _ from '@lhci/utils/src/lodash.js';\nimport './build-hash-selector.css';\nimport {useBranchBuilds} from '../../hooks/use-api-data';\nimport {AsyncLoader, combineLoadingStates, combineAsyncData} from '../../components/async-loader';\nimport {Pill} from '../../components/pill';\nimport {useEffect} from 'preact/hooks';\n\n/** @param {{branch: string, withDevLine: boolean, withNode: boolean, withDevBranchArc: boolean, baseBranch: string}} props */\nconst GitViz = props => {\n  const {branch, withDevLine, withNode, withDevBranchArc} = props;\n\n  return (\n    <span className=\"build-hash-selector__git-viz git-viz\">\n      <span className=\"git-viz__master-line\" />\n      {withDevLine ? <span className=\"git-viz__dev-line\" /> : <Fragment />}\n      {withNode && branch === props.baseBranch ? (\n        <span className=\"git-viz__master-node\" />\n      ) : (\n        <Fragment />\n      )}\n      {withNode && branch !== props.baseBranch ? (\n        <span className=\"git-viz__dev-node\" />\n      ) : (\n        <Fragment />\n      )}\n      {withDevBranchArc ? <span className=\"git-viz__dev-branch-off\" /> : <Fragment />}\n    </span>\n  );\n};\n\n/** @param {{branch: string, withDevLine: boolean, withDevBranchArc?: boolean, baseBranch: string}} props */\nconst LabelLineItem = props => {\n  const variant = props.branch === props.baseBranch ? 'master-branch' : 'dev-branch';\n  return (\n    <li className=\"build-hash-selector__item build-hash-selector__label-li\">\n      <div className=\"container\">\n        <span className=\"build-hash-selector__selection\" />\n        <GitViz\n          baseBranch={props.baseBranch}\n          branch={props.branch}\n          withNode={false}\n          withDevBranchArc={props.withDevBranchArc || false}\n          withDevLine={props.withDevLine}\n        />\n        <span\n          className={`build-hash-selector__branch-label build-hash-selector__branch-label--${variant}`}\n        >\n          {props.branch}\n        </span>\n      </div>\n    </li>\n  );\n};\n\n/** @param {{build: LHCI.ServerCommand.Build}} props */\nconst BuildLink = props => {\n  return props.build.externalBuildUrl ? (\n    <a href={props.build.externalBuildUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n      View Build\n    </a>\n  ) : (\n    <Fragment />\n  );\n};\n\n/** @param {{build: LHCI.ServerCommand.Build}} props */\nconst GitHubLink = props => {\n  try {\n    const externalBuildUrl = new URL(props.build.externalBuildUrl);\n    if (!externalBuildUrl.host.includes('travis-ci')) return <Fragment />;\n    const [org, repo] = externalBuildUrl.pathname.split('/').filter(Boolean);\n    return (\n      <a\n        href={`https://github.com/${org}/${repo}/commit/${props.build.hash}`}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        GitHub\n      </a>\n    );\n  } catch (err) {\n    return <Fragment />;\n  }\n};\n\n/** @param {{build: LHCI.ServerCommand.Build, compareBuild: LHCI.ServerCommand.Build, baseBuild: LHCI.ServerCommand.Build | null | undefined, selector: 'base'|'compare', withDevBranchArc: boolean, withDevLine: boolean, key: string, baseBranch: string}} props */\nconst BuildLineItem = props => {\n  const {build, compareBuild, baseBuild, selector} = props;\n  const isCompareBranch = build.id === compareBuild.id;\n  const isBaseBranch = build.id === (baseBuild && baseBuild.id);\n  const isSelected =\n    (selector === 'base' && isBaseBranch) || (selector === 'compare' && isCompareBranch);\n  const variant = build.branch === props.baseBranch ? 'master-branch' : 'dev-branch';\n\n  return (\n    <li\n      className={clsx('build-hash-selector__item', {\n        'build-hash-selector__item--selected': isSelected,\n      })}\n      key={build.id}\n      onClick={() => {\n        if (isCompareBranch && selector === 'compare') return;\n        if (isBaseBranch && selector === 'base') return;\n\n        const url = new URL(window.location.href);\n\n        if (selector === 'base') {\n          url.searchParams.set('baseBuild', build.id);\n        } else {\n          url.searchParams.delete('baseBuild');\n          if (baseBuild) url.searchParams.set('baseBuild', baseBuild.id);\n          url.pathname = url.pathname.replace(/compare\\/\\w+$/, `compare/${_.shortId(build.id)}`);\n        }\n\n        window.location.href = url.href;\n      }}\n    >\n      <div className=\"container\">\n        <span className=\"build-hash-selector__selection\">\n          {isCompareBranch && selector === 'base' && (\n            <Pill variant=\"compare\" solid>\n              compare\n            </Pill>\n          )}\n          {isBaseBranch && selector === 'compare' && (\n            <Pill variant=\"base\" solid>\n              base\n            </Pill>\n          )}\n        </span>\n        <GitViz\n          baseBranch={props.baseBranch}\n          branch={build.branch}\n          withNode\n          withDevBranchArc={props.withDevBranchArc}\n          withDevLine={props.withDevLine}\n        />\n        <Pill variant={variant} avatar={build}>\n          <span className=\"build-hash-selector__hash\">{build.hash.slice(0, 7)}</span>\n        </Pill>{' '}\n        <span className=\"build-hash-selector__commit\">{build.commitMessage}</span>\n        <span className=\"build-hash-selector__links\">\n          <BuildLink build={build} />\n          <GitHubLink build={build} />\n        </span>\n      </div>\n      {isSelected ? (\n        <i className=\"material-icons build-hash-selector__selector-selection\">check</i>\n      ) : (\n        <Fragment />\n      )}\n    </li>\n  );\n};\n\n/**\n * @param {{build: LHCI.ServerCommand.Build, ancestorBuild?: LHCI.ServerCommand.Build | null, selector: 'base'|'compare', branchBuilds: Array<LHCI.ServerCommand.Build>, baseBuilds: Array<LHCI.ServerCommand.Build>, lhr: LH.Result, baseLhr?: LH.Result, close: () => void, baseBranch: string}} props\n */\nexport const BuildHashSelector_ = props => {\n  const {branchBuilds, baseBuilds, baseBranch} = props;\n  // Builds sorted by run time *descending* because we show most recent at the top.\n  const builds = _.uniqBy(\n    branchBuilds\n      .concat(baseBuilds)\n      .sort((a, b) => new Date(b.runAt).getTime() - new Date(a.runAt).getTime()),\n    build => build.id\n  );\n\n  // Compute the index of the *lowest* dev build so we know when to show the branch arc\n  const indexOfLastDev =\n    props.build.branch === baseBranch\n      ? -10\n      : builds.length -\n        1 -\n        builds\n          .slice()\n          .reverse()\n          .findIndex(build => build.branch === props.build.branch);\n\n  useEffect(() => {\n    /** @param {MouseEvent} evt */\n    const listener = evt => {\n      const target = evt.target;\n      if (!(target instanceof HTMLElement)) return;\n      // Click was within the BuildHashSelector, don't close it.\n      if (target.closest('.build-hash-selector')) return;\n      // Click was on a BuildSelectorHeaderSection, don't close it.\n      if (target.closest('.build-selector-header-section')) return;\n      // Click was outside our target area, close it.\n      props.close();\n    };\n\n    document.addEventListener('click', listener);\n    return () => document.removeEventListener('click', listener);\n  }, [props.close]);\n\n  return (\n    <ul className={`build-hash-selector__list build-hash-selector--${props.selector}`}>\n      {builds.map((build, index) => (\n        <Fragment key={build.id}>\n          <BuildLineItem\n            key={build.id}\n            build={build}\n            compareBuild={props.build}\n            baseBuild={props.ancestorBuild}\n            baseBranch={props.baseBranch}\n            selector={props.selector}\n            withDevLine={index <= indexOfLastDev && props.build.branch !== baseBranch}\n            withDevBranchArc={index === indexOfLastDev + 1}\n          />\n          {index === indexOfLastDev && build.branch !== baseBranch ? (\n            <LabelLineItem branch={build.branch} withDevLine={true} baseBranch={baseBranch} />\n          ) : null}\n          {indexOfLastDev === builds.length - 1 && index === indexOfLastDev ? (\n            <LabelLineItem\n              branch=\"\"\n              withDevLine={false}\n              withDevBranchArc={true}\n              baseBranch={baseBranch}\n            />\n          ) : null}\n          {index === builds.length - 1 ? (\n            <LabelLineItem branch={baseBranch} withDevLine={false} baseBranch={baseBranch} />\n          ) : null}\n        </Fragment>\n      ))}\n    </ul>\n  );\n};\n\n/**\n * @param {{build: LHCI.ServerCommand.Build, ancestorBuild?: LHCI.ServerCommand.Build | null, selector: 'base'|'compare', lhr: LH.Result, baseLhr?: LH.Result, close: () => void, baseBranch: string}} props\n */\nexport const BuildHashSelector = props => {\n  const {build, baseBranch} = props;\n  const branchLoadingData = useBranchBuilds(build.projectId, build.branch, {limit: 100});\n  const baseLoadingData = useBranchBuilds(build.projectId, baseBranch, {limit: 100});\n\n  return (\n    <Fragment>\n      <div className=\"build-hash-selector-obscure-background\" />\n      <div className=\"build-hash-selector\">\n        <AsyncLoader\n          loadingState={combineLoadingStates(branchLoadingData, baseLoadingData)}\n          asyncData={combineAsyncData(branchLoadingData, baseLoadingData)}\n          render={([branchBuilds, baseBuilds]) => (\n            <BuildHashSelector_\n              {...props}\n              branchBuilds={branchBuilds}\n              baseBuilds={baseBuilds}\n              baseBranch={baseBranch}\n            />\n          )}\n        />\n      </div>\n    </Fragment>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport {LhrViewerLink} from './lhr-viewer-link';\nimport './lhr-viewer-button.css';\n\n// @ts-ignore - ts doesn't know how parcel works :)\nconst LH_ICON_PATH = require('../favicon.svg');\n\n/** @param {{lhr: import('./lhr-viewer-link').LHResolver, label?: string}} props */\nexport const LhrViewerButton = props => {\n  const {lhr, label = 'Open Report'} = props;\n  return (\n    <LhrViewerLink lhr={lhr}>\n      <div className=\"lhr-viewer-button\" role=\"button\">\n        <img src={LH_ICON_PATH} /> <span>{label}</span>\n      </div>\n    </LhrViewerLink>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './build-selector-header-section.css';\nimport clsx from 'clsx';\nimport {Pill} from '../../components/pill';\nimport {LhrViewerButton} from '../../components/lhr-viewer-button';\n\n/**\n *\n * @param {{build: LHCI.ServerCommand.Build, variant: 'base'|'compare'}} props\n */\nconst Selection = props => {\n  const {hash, commitMessage = 'unknown commit'} = props.build;\n  return (\n    <Fragment>\n      <Pill className=\"build-selector-header-section__hash\" variant={props.variant} solid>\n        {hash.slice(0, 8)}\n      </Pill>\n      <span className=\"build-selector-header-section__message\">{commitMessage}</span>\n    </Fragment>\n  );\n};\n\n/**\n * @param {{build: LHCI.ServerCommand.Build | null, lhr?: LH.Result, variant: 'base'|'compare', isOpen?: boolean, isDimmed?: boolean, setLhrLinkHover: (v: boolean) => void, onClick?: () => void}} props\n */\nexport const BuildSelectorHeaderSection = props => {\n  return (\n    <div\n      className={clsx(\n        `build-selector-header-section build-selector-header-section--${props.variant}`,\n        {\n          'build-selector-header-section--open': props.isOpen,\n          'build-selector-header-section--dim': props.isDimmed,\n        }\n      )}\n      onClick={props.onClick}\n    >\n      {props.build ? (\n        <Selection build={props.build} variant={props.variant} />\n      ) : (\n        <span className=\"build-selector-header-section__message\">None</span>\n      )}\n      <div\n        className=\"build-selector-header-section__lhr-link\"\n        onMouseEnter={() => props.setLhrLinkHover(true)}\n        onMouseLeave={() => props.setLhrLinkHover(false)}\n      >\n        {props.lhr ? <LhrViewerButton lhr={props.lhr} /> : <Fragment />}\n      </div>\n      <div className=\"build-selector-header-section__variant-label\">{props.variant}</div>\n    </div>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {Paper} from '../../components/paper';\nimport {LhrViewerLink} from '../../components/lhr-viewer-link';\n\n/** @param {{build: LHCI.ServerCommand.Build, baseBuild: LHCI.ServerCommand.Build | null, lhr: LH.Result, baseLhr?: LH.Result, hasBaseOverride: boolean}} props */\nexport function computeWarnings(props) {\n  const {build, baseBuild, baseLhr, hasBaseOverride} = props;\n  const missingBase = !baseBuild;\n  const missingBaseLhr = !baseLhr;\n  const baseAndCompareAreSame = baseBuild && build.hash === baseBuild.hash;\n  const missingAncestor = baseBuild && baseBuild.hash !== build.ancestorHash && !hasBaseOverride;\n  return {\n    hasWarning: missingBase || missingBaseLhr || baseAndCompareAreSame || missingAncestor,\n    missingBase,\n    missingBaseLhr,\n    baseAndCompareAreSame,\n    missingAncestor,\n  };\n}\n\n/** @param {{build: LHCI.ServerCommand.Build, baseBuild: LHCI.ServerCommand.Build | null, lhr: LH.Result, baseLhr?: LH.Result, hasBaseOverride: boolean}} props */\nexport const BuildViewWarnings = props => {\n  const warnings = computeWarnings(props);\n\n  const lhrLinkEl = (\n    <Fragment>\n      <LhrViewerLink className=\"lhr-comparison__warning__lhr-link\" lhr={props.lhr}>\n        jump straight to the Lighthouse report.\n      </LhrViewerLink>\n    </Fragment>\n  );\n\n  if (warnings.missingBase) {\n    return (\n      <Paper className=\"lhr-comparison__warning\">\n        <i className=\"material-icons\">sentiment_very_dissatisfied</i>\n        <div>\n          Oops, no base build could be found for this commit. Manually select a base build above, or{' '}\n          {lhrLinkEl}\n        </div>\n      </Paper>\n    );\n  }\n\n  if (warnings.baseAndCompareAreSame) {\n    return (\n      <Paper className=\"lhr-comparison__warning\">\n        <i className=\"material-icons\">sentiment_very_dissatisfied</i>\n        <div>\n          Oops, this base build is the same commit as the compare. Select a different base build to\n          explore differences, or {lhrLinkEl}\n        </div>\n      </Paper>\n    );\n  }\n\n  if (warnings.missingBaseLhr) {\n    return (\n      <Paper className=\"lhr-comparison__warning\">\n        <i className=\"material-icons\">sentiment_very_dissatisfied</i>\n        <div>\n          Oops, this base build is missing a run for this URL. Select a different URL to explore\n          differences, or {lhrLinkEl}\n        </div>\n      </Paper>\n    );\n  }\n\n  if (warnings.missingAncestor) {\n    return (\n      <Paper className=\"lhr-comparison__warning\">\n        <i className=\"material-icons\">warning</i>\n        <div>\n          This base build is not the exact ancestor of the compare. Differences may not be due to\n          this specific commit.\n        </div>\n      </Paper>\n    );\n  }\n\n  return <Fragment />;\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n'use strict';\n\n/**\n * @see https://github.com/GoogleChrome/lighthouse/blob/2ff07d29a3e12a75cc844427c567330eb84d4249/lighthouse-core/report/html/renderer/util.js#L320-L347\n *\n * Split a string on markdown links (e.g. [some link](https://...)) into\n * segments of plain text that weren't part of a link (marked as\n * `isLink === false`), and segments with text content and a URL that did make\n * up a link (marked as `isLink === true`).\n * @param {string} text\n * @return {Array<{isLink: true, text: string, linkHref: string}|{isLink: false, text: string}>}\n */\nfunction splitMarkdownLink(text) {\n  /** @type {Array<{isLink: true, text: string, linkHref: string}|{isLink: false, text: string}>} */\n  const segments = [];\n\n  const parts = text.split(/\\[([^\\]]+?)\\]\\((https?:\\/\\/.*?)\\)/g);\n  while (parts.length) {\n    // Shift off the same number of elements as the pre-split and capture groups.\n    const [preambleText, linkText, linkHref] = parts.splice(0, 3);\n\n    if (preambleText) {\n      // Skip empty text as it's an artifact of splitting, not meaningful.\n      segments.push({\n        isLink: false,\n        text: preambleText,\n      });\n    }\n\n    // Append link if there are any.\n    if (linkText && linkHref) {\n      segments.push({\n        isLink: true,\n        text: linkText,\n        linkHref,\n      });\n    }\n  }\n\n  return segments;\n}\n\nmodule.exports = {splitMarkdownLink};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {splitMarkdownLink} from '@lhci/utils/src/markdown.js';\n\n/** @param {{text: string}} props */\nexport const Markdown = props => {\n  const segments = splitMarkdownLink(props.text);\n\n  return (\n    <Fragment>\n      {segments.map((segment, i) => {\n        if (!segment.isLink) return <span key={i}>{segment.text}</span>;\n\n        const url = new URL(segment.linkHref);\n\n        const DOCS_ORIGINS = ['https://developers.google.com', 'https://web.dev'];\n        if (DOCS_ORIGINS.includes(url.origin)) {\n          url.searchParams.set('utm_source', 'lighthouse');\n          url.searchParams.set('utm_medium', 'ci');\n        }\n\n        return (\n          <a key={i} href={url.href} target=\"_blank\" rel=\"noopener noreferrer\">\n            {segment.text}\n          </a>\n        );\n      })}\n    </Fragment>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport {Nbsp} from '../../../components/nbsp';\nimport './simple-details.css';\nimport {getDiffLabel, getDeltaStats} from '@lhci/utils/src/audit-diff-finder.js';\n\n/** @param {{type: LH.DetailsType, baseValue: any, compareValue: any, diff?: LHCI.NumericItemAuditDiff}} props */\nexport const SimpleDetails = props => {\n  let type = props.type;\n  const {compareValue, baseValue, diff} = props;\n  const value = compareValue === undefined ? baseValue : compareValue;\n\n  if (typeof value === 'object' && value.type) {\n    type = value.type;\n  }\n\n  const label = diff ? getDiffLabel(diff) : 'neutral';\n\n  const numericBase = Number.isFinite(baseValue) ? baseValue : 0;\n  const numericCompare = Number.isFinite(compareValue) ? compareValue : 0;\n  const baseDisplay = `Base Value: ${Math.round(numericBase).toLocaleString()}`;\n  const compareDisplay = `Compare Value: ${Math.round(numericCompare).toLocaleString()}`;\n  const numericTitle = `${baseDisplay}, ${compareDisplay}`;\n  const deltaPercent =\n    diff && getDeltaStats(diff).percentAbsoluteDelta !== 1\n      ? ` (${(getDeltaStats(diff).percentAbsoluteDelta * 100).toLocaleString(undefined, {\n          maximumFractionDigits: 0,\n        })}%)`\n      : '';\n\n  switch (type) {\n    case 'bytes': {\n      const kb = Math.abs((numericCompare - numericBase) / 1024);\n      return (\n        <pre className={`simple-details--${label}`} data-tooltip={numericTitle}>\n          {numericCompare >= numericBase ? '+' : '-'}\n          {kb.toLocaleString(undefined, {maximumFractionDigits: Math.abs(kb) < 1 ? 1 : 0})}\n          <Nbsp />\n          KB\n          {deltaPercent}\n        </pre>\n      );\n    }\n    case 'ms':\n    case 'timespanMs': {\n      const ms = Math.abs(Math.round(numericCompare - numericBase));\n      return (\n        <pre className={`simple-details--${label}`} data-tooltip={numericTitle}>\n          {numericCompare >= numericBase ? '+' : '-'}\n          {ms.toLocaleString()}\n          <Nbsp />\n          ms\n          {deltaPercent}\n        </pre>\n      );\n    }\n    case 'thumbnail':\n      return (\n        <img\n          style={{width: 48, height: 48, objectFit: 'cover'}}\n          src={'asdfasjdfoiasjdfosdj'}\n          onError={evt => {\n            const img = evt.srcElement;\n            if (!(img instanceof HTMLImageElement)) return;\n\n            // On failure just replace the image with a 1x1 transparent gif.\n            img.onerror = null;\n            img.src =\n              'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==';\n          }}\n        />\n      );\n    case 'url': {\n      let display = value;\n      let hostname = '';\n      try {\n        const url = new URL(value);\n        display = url.pathname;\n        hostname = url.hostname;\n      } catch (_) {}\n\n      // FIXME: use title instead of data-tooltip because of the `overflow: hidden` constraints on the table cell.\n      return (\n        <span title={value}>\n          {display}\n          {hostname ? <span className=\"simple-details__url-hostname\">({hostname})</span> : ''}\n        </span>\n      );\n    }\n    case 'link': {\n      if (!value.url) return <span>{value.text}</span>;\n      return (\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={value.url}>\n          {value.text}\n        </a>\n      );\n    }\n    case 'code':\n      return <pre>{value}</pre>;\n    case 'numeric': {\n      return (\n        <pre className={`simple-details--${label}`}>\n          {numericCompare >= numericBase ? '+' : '-'}\n          {Math.abs(numericCompare - numericBase).toLocaleString()}\n          {deltaPercent}\n        </pre>\n      );\n    }\n    case 'text':\n      return <span>{value}</span>;\n    case 'node':\n      return <pre>{value.snippet}</pre>;\n    case 'source-location': {\n      if (!value.url) return <pre>{JSON.stringify(value)}</pre>;\n      const {url, line, column} = value;\n      return (\n        <pre>\n          {url}:{line}:{column}\n        </pre>\n      );\n    }\n    default: {\n      const debugdata = JSON.stringify(props);\n      return <pre data-tooltip={debugdata}>{debugdata.slice(0, 20)}</pre>;\n    }\n  }\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './table-details.css';\nimport {SimpleDetails} from './simple-details';\nimport {\n  zipBaseAndCompareItems,\n  sortZippedBaseAndCompareItems,\n  getRowLabelForIndex,\n} from '@lhci/utils/src/audit-diff-finder';\n\n/** @param {LH.DetailsType} itemType @return {boolean} */\nfunction isNumericValueType(itemType) {\n  switch (itemType) {\n    case 'bytes':\n    case 'ms':\n    case 'timespanMs':\n    case 'numeric':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/** @param {{pair: LHCI.AuditPair}} props */\nexport const TableDetails = props => {\n  const {audit, baseAudit, diffs: allDiffs} = props.pair;\n  if (!audit.details) return <Fragment />;\n  const {headings: compareHeadings, items: compareItems} = audit.details;\n  if (!compareHeadings || !compareItems) return <Fragment />;\n\n  const baseHeadings = (baseAudit && baseAudit.details && baseAudit.details.headings) || [];\n  const baseItems = (baseAudit && baseAudit.details && baseAudit.details.items) || [];\n\n  const zippedItems = zipBaseAndCompareItems(baseItems, compareItems);\n  const sortedItems = sortZippedBaseAndCompareItems(allDiffs, zippedItems);\n  const headings = compareHeadings.length ? compareHeadings : baseHeadings;\n  // We'll insert the row label before the first numeric heading, or last if none is found.\n  let insertRowLabelAfterIndex =\n    headings.findIndex(heading =>\n      isNumericValueType(heading.valueType || heading.itemType || 'unknown')\n    ) - 1;\n  if (insertRowLabelAfterIndex < 0) insertRowLabelAfterIndex = headings.length - 1;\n\n  return (\n    <div className=\"table-details\">\n      <table>\n        <thead>\n          <tr>\n            {headings.map((heading, i) => {\n              const itemType = heading.valueType || heading.itemType || 'unknown';\n              return (\n                <Fragment key={i}>\n                  <th className={`table-column--${itemType}`}>{heading.label || heading.text}</th>\n                  {insertRowLabelAfterIndex === i ? <th /> : null}\n                </Fragment>\n              );\n            })}\n          </tr>\n        </thead>\n        <tbody>\n          {sortedItems.map(({base, compare, diffs}) => {\n            const definedItem = compare || base;\n            // This should never be true, but make tsc happy\n            if (!definedItem) return null;\n\n            const key = `${base && base.index}-${compare && compare.index}`;\n            const state = getRowLabelForIndex(\n              allDiffs,\n              compare && compare.index,\n              base && base.index\n            );\n\n            return (\n              <tr key={key}>\n                {headings.map((heading, j) => {\n                  const itemType = heading.valueType || heading.itemType || 'unknown';\n                  const diff = diffs.find(\n                    /** @return {diff is LHCI.NumericItemAuditDiff} */\n                    diff => diff.type === 'itemDelta' && diff.itemKey === heading.key\n                  );\n\n                  return (\n                    <Fragment key={j}>\n                      <td className={`table-column--${itemType}`}>\n                        <SimpleDetails\n                          type={itemType}\n                          compareValue={compare && compare.item[heading.key]}\n                          baseValue={base && base.item[heading.key]}\n                          diff={diff}\n                        />\n                      </td>\n                      {insertRowLabelAfterIndex === j ? (\n                        <td className=\"table-column--row-label\">\n                          {state === 'added' || state === 'removed' ? state : ''}\n                        </td>\n                      ) : null}\n                    </Fragment>\n                  );\n                })}\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {getDeltaLabel} from '@lhci/utils/src/audit-diff-finder';\nimport clsx from 'clsx';\nimport {Nbsp} from '../../../components/nbsp';\nimport './numeric-diff.css';\n\nconst BIG_PICTURE_LIMITS = {\n  'first-contentful-paint': [0, 10000],\n  'first-meaningful-paint': [0, 10000],\n  'largest-contentful-paint': [0, 15000],\n  'speed-index': [0, 15000],\n  'first-cpu-idle': [0, 15000],\n  interactive: [0, 20000],\n  'estimated-input-latency': [0, 1500],\n  'max-potential-fid': [0, 1500],\n  'total-blocking-time': [0, 1500],\n  __default__: [0, 30 * 1000],\n};\n\n/** @param {LH.AuditResult|undefined} audit @param {'lower'|'upper'} limitType */\nconst getBigPictureLimit = (audit, limitType) => {\n  const auditId = /** @type {keyof typeof BIG_PICTURE_LIMITS} */ (audit && audit.id) || '';\n  const limits = BIG_PICTURE_LIMITS[auditId] || BIG_PICTURE_LIMITS.__default__;\n  return limits[limitType === 'lower' ? 0 : 1];\n};\n\n/** @param {number} x @param {'up'|'down'} direction */\nconst toNearestRoundNumber = (x, direction) => {\n  const fn = direction === 'up' ? Math.ceil : Math.floor;\n  if (x < 10) return fn(x);\n  if (x < 100) return fn(x / 10) * 10;\n  if (x < 1000) return fn(x / 100) * 100;\n  if (x < 10000) return fn(x / 1000) * 1000;\n  return fn(x / 2500) * 2500;\n};\n\n/**\n * @param {LH.AuditResult|undefined} audit\n * @param {string|undefined} groupId\n * @return {'ms'|'bytes'|'none'}\n */\nconst getUnitFromAudit = (audit, groupId) => {\n  if (groupId === 'metrics') return 'ms';\n  if (groupId === 'load-opportunities') return 'ms';\n  if (!audit) return 'none';\n\n  if (audit.details) {\n    const details = audit.details;\n    if (details.overallSavingsMs) return 'ms';\n  }\n\n  const displayValue = audit.displayValue || '';\n  if (/[0-9,.]+\\s(ms|s)$/.test(displayValue)) return 'ms';\n  if (/[0-9,.]+\\s(KB|MB)$/.test(displayValue)) return 'bytes';\n\n  return 'none';\n};\n\n/** @param {number} x @param {{asDelta?: boolean, unit: 'ms'|'bytes'|'none', withSuffix?: boolean, preventSecondsConversion?: boolean}} options */\nconst toDisplay = (x, options) => {\n  const {asDelta = false, withSuffix = false, unit = 'none'} = options;\n  let value = Math.round(x);\n  let fractionDigits = 0;\n  let suffixUnit = '';\n\n  if (unit === 'ms') {\n    suffixUnit = 'ms';\n\n    if (Math.abs(value) >= 1000 && !options.preventSecondsConversion) {\n      value /= 1000;\n      fractionDigits = 1;\n      suffixUnit = 's';\n    }\n  }\n\n  if (unit === 'bytes') {\n    suffixUnit = 'KB';\n    value /= 1024;\n\n    if (Math.abs(value) >= 500) {\n      value /= 1024;\n      fractionDigits = 1;\n      suffixUnit = 'MB';\n    }\n  }\n\n  if (unit === 'none') {\n    if (Math.abs(value) >= 50) {\n      value /= 1000;\n      fractionDigits = 1;\n      suffixUnit = 'K';\n    }\n  }\n\n  const string = value.toLocaleString(undefined, {\n    minimumFractionDigits: fractionDigits,\n    maximumFractionDigits: fractionDigits,\n  });\n\n  const numericSign = asDelta && value >= 0 ? '+' : '';\n  const resultStr = numericSign + string + (withSuffix ? suffixUnit : '');\n  return {\n    element: (\n      <span>\n        {numericSign}\n        {string}\n        {withSuffix ? (\n          <Fragment>\n            <Nbsp />\n            {suffixUnit}\n          </Fragment>\n        ) : (\n          ''\n        )}\n      </span>\n    ),\n    string: resultStr,\n    length: resultStr.length,\n  };\n};\n\n/** @param {{diff: LHCI.NumericAuditDiff, audit?: LH.AuditResult, groupId?: string, showAsBigPicture?: boolean, showAsNarrow?: boolean}} props */\nexport const NumericDiff = props => {\n  const {diff, audit, groupId} = props;\n  const unit = getUnitFromAudit(audit, groupId);\n  const currentNumericValue = diff.compareValue;\n  const baseNumericValue = diff.baseValue;\n\n  if (typeof baseNumericValue !== 'number' || typeof currentNumericValue !== 'number') {\n    return <span>No diff available</span>;\n  }\n\n  const delta = currentNumericValue - baseNumericValue;\n  const minValue = Math.min(currentNumericValue, baseNumericValue);\n  const maxValue = Math.max(currentNumericValue, baseNumericValue);\n  const lowerLimit = props.showAsBigPicture\n    ? getBigPictureLimit(audit, 'lower')\n    : toNearestRoundNumber(minValue * 0.8, 'down');\n  const upperLimit = props.showAsBigPicture\n    ? getBigPictureLimit(audit, 'upper')\n    : toNearestRoundNumber(maxValue * 1.2, 'up');\n  const range = upperLimit - lowerLimit;\n\n  const minValueConstrainted = Math.min(Math.max(minValue, lowerLimit), upperLimit);\n  const maxValueConstrainted = Math.min(Math.max(maxValue, lowerLimit), upperLimit);\n  const boxLeft = (100 * (minValueConstrainted - lowerLimit)) / range;\n  const boxRight = 100 - (100 * (maxValueConstrainted - lowerLimit)) / range;\n  const deltaType = getDeltaLabel(delta, 'audit');\n  const minValueIsCurrentValue = minValue === currentNumericValue;\n  const hoverDisplay = `${toDisplay(baseNumericValue, {unit, withSuffix: true}).string} to ${\n    toDisplay(currentNumericValue, {\n      withSuffix: true,\n      unit,\n    }).string\n  }`;\n\n  if (props.showAsNarrow) {\n    return (\n      <div className={clsx('audit-numeric-diff', `text--${deltaType}`)} data-tooltip={hoverDisplay}>\n        {\n          toDisplay(delta, {asDelta: true, withSuffix: true, preventSecondsConversion: true, unit})\n            .element\n        }\n      </div>\n    );\n  }\n\n  // We want to ensure there's ~10px per character of space for the delta label.\n  // The min-width of the bar is ~300px, so if the deltaLabel is going to take up more than\n  // the narrowCutoffThresholdInPercent we want to flip it over to the other side.\n  const {element: deltaLabel, length: deltaLabelLength} = toDisplay(delta, {\n    asDelta: true,\n    withSuffix: true,\n    preventSecondsConversion: true,\n    unit,\n  });\n  const narrowCutoffThresholdInPercent = (deltaLabelLength * 10 * 100) / 300;\n\n  return (\n    <Fragment>\n      <div className=\"audit-numeric-diff\">\n        <div className=\"audit-numeric-diff__left-label\">\n          {toDisplay(lowerLimit, {unit}).element}\n        </div>\n        <div className=\"audit-numeric-diff__bar\">\n          <div\n            className={clsx('audit-numeric-diff__box', {\n              'audit-numeric-diff__box--improvement': deltaType === 'improvement',\n              'audit-numeric-diff__box--regression': deltaType === 'regression',\n            })}\n            style={{left: `${boxLeft}%`, right: `${boxRight}%`}}\n            data-tooltip={hoverDisplay}\n          >\n            <div\n              className=\"audit-numeric-diff__now\"\n              style={{left: minValueIsCurrentValue ? '0%' : '100%'}}\n            />\n            <div\n              className={clsx('audit-numeric-diff__delta-label', {\n                'audit-numeric-diff__delta-label--narrow-left':\n                  deltaType === 'improvement' && boxLeft < narrowCutoffThresholdInPercent,\n                'audit-numeric-diff__delta-label--narrow-right':\n                  deltaType === 'regression' && boxRight < narrowCutoffThresholdInPercent,\n              })}\n              style={{[minValueIsCurrentValue ? 'right' : 'left']: '100%'}}\n            >\n              {deltaLabel}\n            </div>\n          </div>\n        </div>\n        <div className=\"audit-numeric-diff__right-label\">\n          {toDisplay(upperLimit, {unit}).element}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport * as _ from '@lhci/utils/src/lodash';\nimport {h, Fragment} from 'preact';\nimport {ScoreWord} from '../../../components/score-icon';\nimport {NumericDiff} from './numeric-diff';\nimport {getDiffLabel, getRowLabelForIndex} from '@lhci/utils/src/audit-diff-finder';\nimport clsx from 'clsx';\n\n/** @type {Record<string, string>} */\nconst ICONS_BY_AUDIT_ID = {\n  'font-display': 'font_download',\n  'uses-rel-preconnect': 'language',\n\n  'user-timings': 'timer',\n  'bootup-time': 'speed',\n  'mainthread-work-breakdown': 'speed',\n\n  'third-party-summary': 'language',\n\n  deprecations: 'error',\n  'errors-in-console': 'error',\n  'font-sizes': 'format_size',\n};\n\n/** @param {{audit: LH.AuditResult, groupId: string}} props */\nconst IconForAuditItems = props => {\n  const auditId = props.audit.id || '';\n  const groupId = props.groupId || '';\n\n  let icon = '';\n  if (groupId.includes('opportunities')) icon = 'web_asset';\n  if (groupId.includes('a11y')) icon = 'code';\n  if (auditId.includes('image')) icon = 'photo';\n  icon = ICONS_BY_AUDIT_ID[auditId] || icon || 'list_alt';\n\n  return <i className=\"material-icons\">{icon}</i>;\n};\n\n/** @param {{diff: LHCI.AuditDiff, audit: LH.AuditResult, baseAudit: LH.AuditResult}} props */\nconst ScoreDiff = props => {\n  return (\n    <Fragment>\n      <ScoreWord audit={props.baseAudit} />\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${getDiffLabel(\n          props.diff\n        )}`}\n      >\n        arrow_forward\n      </i>\n      <ScoreWord audit={props.audit} />\n    </Fragment>\n  );\n};\n\n/** @param {{diff: LHCI.DisplayValueAuditDiff, audit: LH.AuditResult, baseAudit: LH.AuditResult}} props */\nconst DisplayValueDiff = props => {\n  return (\n    <Fragment>\n      <span>{props.diff.baseValue}</span>\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${getDiffLabel(\n          props.diff\n        )}`}\n      >\n        arrow_forward\n      </i>\n      <span>{props.diff.compareValue}</span>\n    </Fragment>\n  );\n};\n\n/** @param {import('@lhci/utils/src/audit-diff-finder').RowLabel} rowLabel @return {'regression'|'improvement'|'neutral'} */\nfunction getDiffLabelForRowLabel(rowLabel) {\n  switch (rowLabel) {\n    case 'added':\n    case 'worse':\n    case 'ambiguous':\n      return 'regression';\n    case 'removed':\n    case 'better':\n      return 'improvement';\n    case 'no change':\n      return 'neutral';\n  }\n}\n\n/** @param {Array<LHCI.AuditDiff>} diffs */\nfunction getUniqueBaseCompareIndexPairs(diffs) {\n  return _.uniqBy(\n    diffs\n      .map(diff => ({\n        base: 'baseItemIndex' in diff ? diff.baseItemIndex : undefined,\n        compare: 'compareItemIndex' in diff ? diff.compareItemIndex : undefined,\n      }))\n      .filter(indexes => typeof indexes.base === 'number' || typeof indexes.compare === 'number'),\n    idx => `${idx.base}-${idx.compare}`\n  );\n}\n\n/** @param {{diffs: Array<LHCI.AuditDiff>, audit: LH.AuditResult, baseAudit: LH.AuditResult, groupId: string, showAsNarrow?: boolean}} props */\nexport const ItemDiff = props => {\n  const {diffs, baseAudit, groupId} = props;\n  const baseAuditItems = (baseAudit.details && baseAudit.details.items) || [];\n\n  const rowIndexes = getUniqueBaseCompareIndexPairs(diffs);\n  const rowLabels = rowIndexes\n    .map(pair => getRowLabelForIndex(diffs, pair.compare, pair.base))\n    .map(getDiffLabelForRowLabel);\n\n  const regressionCount = rowLabels.filter(label => label === 'regression').length;\n  const improvementCount = rowLabels.filter(label => label === 'improvement').length;\n\n  const baseElements = (\n    <Fragment>\n      <div className=\"audit-group__diff-badge-group\">\n        <IconForAuditItems audit={props.audit} groupId={groupId} />\n        <div className=\"audit-group__diff-badges\">\n          <span className=\"audit-group__diff-badge\">{baseAuditItems.length}</span>\n        </div>\n      </div>\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${\n          improvementCount > regressionCount ? 'improvement' : 'regression'\n        }`}\n      >\n        arrow_forward\n      </i>\n    </Fragment>\n  );\n\n  return (\n    <Fragment>\n      {props.showAsNarrow ? <Fragment /> : baseElements}\n      <div className={clsx(`audit-group__diff-badge-group`)}>\n        <IconForAuditItems audit={props.audit} groupId={groupId} />\n        <div\n          className={clsx('audit-group__diff-badges', {\n            'audit-group__diff-badge-group--multiple': Boolean(regressionCount && improvementCount),\n          })}\n        >\n          {regressionCount ? (\n            <span className=\"audit-group__diff-badge audit-group__diff-badge--regression\">\n              {regressionCount}\n            </span>\n          ) : null}\n          {improvementCount ? (\n            <span className=\"audit-group__diff-badge audit-group__diff-badge--improvement\">\n              {improvementCount}\n            </span>\n          ) : null}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nconst NoBaseAudit = () => (\n  <div className=\"audit-group__error-message\" data-tooltip=\"Audit did not run in the base report\">\n    <i className=\"material-icons\">error_outline</i> Audit Missing\n  </div>\n);\n\n/** @param {{audit: LH.AuditResult, baseAudit: LH.AuditResult}} props */\nconst ErrorDiff = props => {\n  let message = 'An unknown error occurred while trying to compare the audit results.';\n  if (props.audit.scoreDisplayMode === 'error') {\n    message = `Audit in compare report errored: ${props.audit.errorMessage}`;\n  } else if (props.baseAudit.scoreDisplayMode === 'error') {\n    message = `Audit in base report errored: ${props.baseAudit.errorMessage}`;\n  }\n\n  return (\n    <div className=\"audit-group__error-message\" data-tooltip={message}>\n      <i className=\"material-icons\">error_outline</i> Audit Error\n    </div>\n  );\n};\n\n/** @param {{pair: LHCI.AuditPair, showAsBigPicture: boolean, showAsNarrow: boolean}} props */\nexport const AuditDiff = props => {\n  const {audit, baseAudit, diffs, group} = props.pair;\n  const noDiffAvailable = <span>No diff available</span>;\n\n  if (!baseAudit) return <NoBaseAudit />;\n\n  const errorDiff = diffs.find(diff => diff.type === 'error');\n  if (errorDiff) return <ErrorDiff audit={audit} baseAudit={baseAudit} />;\n\n  const numericDiff = diffs.find(diff => diff.type === 'numericValue');\n  if (numericDiff && numericDiff.type === 'numericValue') {\n    return (\n      <NumericDiff\n        diff={numericDiff}\n        audit={audit}\n        groupId={group.id}\n        showAsBigPicture={props.showAsBigPicture}\n        showAsNarrow={props.showAsNarrow}\n      />\n    );\n  }\n\n  const hasItemDiff = diffs.some(\n    diff => diff.type === 'itemAddition' || diff.type === 'itemRemoval' || diff.type === 'itemDelta'\n  );\n  if (hasItemDiff) {\n    return (\n      <ItemDiff\n        diffs={diffs}\n        audit={audit}\n        baseAudit={baseAudit}\n        groupId={group.id}\n        showAsNarrow={props.showAsNarrow}\n      />\n    );\n  }\n\n  const scoreDiff = diffs.find(diff => diff.type === 'score');\n  if (scoreDiff) return <ScoreDiff diff={scoreDiff} audit={audit} baseAudit={baseAudit} />;\n\n  const displayValueDiff = diffs.find(diff => diff.type === 'displayValue');\n  if (!displayValueDiff || displayValueDiff.type !== 'displayValue') return noDiffAvailable;\n  return <DisplayValueDiff diff={displayValueDiff} audit={audit} baseAudit={baseAudit} />;\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport clsx from 'clsx';\nimport {ScoreWord, ScoreIcon} from '../../../components/score-icon';\nimport {Markdown} from '../../../components/markdown';\nimport {TableDetails} from './table-details';\nimport {NumericDiff} from '../audit-list/numeric-diff';\nimport {ItemDiff} from '../audit-list/audit-diff';\nimport {getDiffLabel} from '@lhci/utils/src/audit-diff-finder';\n\n/** @param {{pair: LHCI.AuditPair, diff: LHCI.AuditDiff}} props */\nconst ScoreOnlyDetails = props => {\n  const {audit, baseAudit} = props.pair;\n  if (!baseAudit) return null;\n\n  return (\n    <div className=\"audit-detail-pane__audit-details--binary\">\n      <ScoreWord audit={baseAudit} />\n      <i\n        className={`material-icons audit-group__diff-arrow audit-group__diff-arrow--${getDiffLabel(\n          props.diff\n        )}`}\n      >\n        arrow_forward\n      </i>\n      <ScoreWord audit={audit} />\n    </div>\n  );\n};\n\n/** @param {{pair: LHCI.AuditPair}} props */\nconst ErrorDetails = props => {\n  const erroredAudit =\n    props.pair.audit.scoreDisplayMode === 'error' ? props.pair.audit : props.pair.baseAudit;\n  if (!erroredAudit) return null;\n  return (\n    <Fragment>\n      <div className=\"audit-detail-pane__audit-details-summary\">\n        Error occurred in the{' '}\n        {erroredAudit === props.pair.baseAudit ? 'base report:' : 'compare report:'}\n      </div>\n      <pre>{erroredAudit.errorMessage || 'Unknown error'}</pre>\n    </Fragment>\n  );\n};\n\n/** @param {{pair: LHCI.AuditPair, key?: string}} props */\nconst Details = props => {\n  const {pair} = props;\n  const details = pair.audit.details || {type: 'unknown'};\n  const baseDetails = (pair.baseAudit && pair.baseAudit.details) || {type: 'unknown'};\n  const hasItems = Boolean((details.items || []).length || (baseDetails.items || []).length);\n\n  let itemDiff = undefined;\n  let tableDetails = undefined;\n  let numericDetails = undefined;\n\n  if (pair.audit.errorMessage || (pair.baseAudit && pair.baseAudit.errorMessage)) {\n    return <ErrorDetails pair={pair} />;\n  }\n\n  if ((details.type === 'table' || details.type === 'opportunity') && hasItems) {\n    tableDetails = <TableDetails pair={pair} />;\n    if (pair.baseAudit) {\n      itemDiff = <ItemDiff {...pair} baseAudit={pair.baseAudit} groupId={pair.group.id} />;\n    }\n  }\n\n  const numericDiff = pair.diffs.find(diff => diff.type === 'numericValue');\n  if (numericDiff && numericDiff.type === 'numericValue') {\n    numericDetails = <NumericDiff diff={numericDiff} audit={pair.audit} />;\n  }\n\n  if (tableDetails || numericDiff) {\n    return (\n      <Fragment>\n        <div className=\"audit-detail-pane__audit-details-summary\">{numericDetails || itemDiff}</div>\n        {tableDetails}\n      </Fragment>\n    );\n  }\n\n  const scoreDiff = pair.diffs.find(diff => diff.type === 'score');\n  if (scoreDiff && scoreDiff.type === 'score')\n    return <ScoreOnlyDetails diff={scoreDiff} pair={props.pair} />;\n\n  return <pre>{JSON.stringify(props.pair, null, 2)}</pre>;\n};\n\n/** @param {{pair: LHCI.AuditPair, key?: string}} props */\nexport const AuditDetail = props => {\n  const {audit} = props.pair;\n\n  return (\n    <div id={`audit-detail-pane-audit--${audit.id}`} className={clsx('audit-detail-pane__audit')}>\n      <div className=\"audit-detail-pane__score\">\n        <ScoreIcon score={audit.score || 0} />\n      </div>\n      <div className=\"audit-detail-pane__audit-title\">{audit.title}</div>\n      <div className=\"audit-detail-pane__audit-description\">\n        <Markdown text={audit.description || ''} />\n      </div>\n      <div className=\"audit-detail-pane__audit-details\">\n        <Details pair={props.pair} />\n      </div>\n    </div>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './audit-detail-pane.css';\nimport {usePreviousValue} from '../../../hooks/use-previous-value.jsx';\nimport {useEffect, useRef} from 'preact/hooks';\nimport {AuditDetail} from './audit-detail';\n\n/**\n * @param {{selectedAuditId: string, setSelectedAuditId: (id: string|null) => void, pairs: Array<LHCI.AuditPair>, baseLhr?: LH.Result}} props\n */\nexport const AuditDetailPane = props => {\n  /** @type {import('preact').Ref<HTMLElement|undefined>} */\n  const paneElementRef = useRef(undefined);\n  const previouslySelectedAuditId = usePreviousValue(props.selectedAuditId);\n\n  // Scroll to the selected audit *when it changes*\n  useEffect(() => {\n    const auditId = props.selectedAuditId;\n    const paneElement = paneElementRef.current;\n    if (!paneElement || !auditId || auditId === previouslySelectedAuditId) return;\n\n    const childElement = paneElement.querySelector(`#audit-detail-pane-audit--${auditId}`);\n    if (!childElement || !(childElement instanceof HTMLElement)) return;\n\n    paneElement.scrollTo(0, childElement.offsetTop);\n  }, [props.selectedAuditId, previouslySelectedAuditId]);\n\n  return (\n    <div className=\"audit-detail-pane\" ref={el => (paneElementRef.current = el)}>\n      <div className=\"audit-detail-pane__close\" onClick={() => props.setSelectedAuditId(null)}>\n        <i className=\"material-icons\">close</i>\n      </div>\n      {props.pairs.map(pair => {\n        const {audit} = pair;\n        if (!audit.id) return undefined;\n        return <AuditDetail key={audit.id} pair={pair} />;\n      })}\n    </div>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport clsx from 'clsx';\n\nimport * as _ from '@lhci/utils/src/lodash.js';\nimport './pwa-gauge.css';\n\n// For SVG to function properly, we need to use the real attribtues that preact doesn't set.\n/* eslint-disable react/no-unknown-property */\n\n/** @typedef {{optimized: boolean, installable: boolean, fastAndReliable: boolean}} PWABadgeStatus */\n\n/** @param {{deltaType: import('@lhci/utils/src/audit-diff-finder').DiffLabel}} props */\nexport const FastReliableIcon = props => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      class={`pwa-icon pwa-icon--${props.deltaType}`}\n    >\n      <g fill-rule=\"nonzero\" fill=\"none\">\n        <circle class={`pwa-icon__background`} cx=\"12\" cy=\"12\" r=\"12\" />\n        <path\n          d=\"M12 4.3l6.3 2.8v4.2c0 3.88-2.69 7.52-6.3 8.4-3.61-.88-6.3-4.51-6.3-8.4V7.1L12 4.3zm-.56 12.88l3.3-5.79.04-.08c.05-.1.01-.29-.26-.29h-1.96l.56-3.92h-.56L9.3 12.82c0 .03.07-.12-.03.07-.11.2-.12.37.2.37h1.97l-.56 3.92h.56z\"\n          fill=\"#FFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\n/** @param {{deltaType: import('@lhci/utils/src/audit-diff-finder').DiffLabel}} props */\nexport const InstallableIcon = props => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      class={`pwa-icon pwa-icon--${props.deltaType}`}\n    >\n      <g fill-rule=\"nonzero\" fill=\"none\">\n        <circle class={`pwa-icon__background`} cx=\"12\" cy=\"12\" r=\"12\" />\n        <path\n          d=\"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm3.5 7.7h-2.8v2.8h-1.4v-2.8H8.5v-1.4h2.8V8.5h1.4v2.8h2.8v1.4z\"\n          fill=\"#FFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\n/** @param {{deltaType: import('@lhci/utils/src/audit-diff-finder').DiffLabel}} props */\nexport const OptimizedIcon = props => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      viewBox=\"0 0 24 24\"\n      class={`pwa-icon pwa-icon--${props.deltaType}`}\n    >\n      <g fill=\"none\" fill-rule=\"evenodd\">\n        <rect class={`pwa-icon__background`} width=\"24\" height=\"24\" rx=\"12\" />\n        <path d=\"M5 5h14v14H5z\" />\n        <path\n          fill=\"#FFF\"\n          d=\"M12 15.07l3.6 2.18-.95-4.1 3.18-2.76-4.2-.36L12 6.17l-1.64 3.86-4.2.36 3.2 2.76-.96 4.1z\"\n        />\n      </g>\n    </svg>\n  );\n};\n\n/**\n *\n * @param {PWABadgeStatus} base\n * @param {PWABadgeStatus} compare\n * @param {keyof PWABadgeStatus} key\n * @return {import('@lhci/utils/src/audit-diff-finder').DiffLabel}\n */\nexport function getBadgeDiffType(base, compare, key) {\n  if (base[key] === compare[key]) return 'neutral';\n  if (compare[key]) return 'improvement';\n  return 'regression';\n}\n\n/** @param {LH.Result} lhr @return {PWABadgeStatus} */\nexport function getBadgeStatus(lhr) {\n  const pwaCategory = lhr.categories.pwa;\n  const auditsByCategory = _.groupIntoMap(pwaCategory.auditRefs, ref => ref.group);\n  /** @param {LH.CategoryResult['auditRefs']} [refs] */\n  const hasEveryPass = (refs = []) =>\n    refs.map(ref => lhr.audits[ref.id]).every(audit => audit && audit.score === 1);\n  return {\n    optimized: hasEveryPass(auditsByCategory.get('pwa-optimized') || []),\n    installable: hasEveryPass(auditsByCategory.get('pwa-installable') || []),\n    fastAndReliable: hasEveryPass(auditsByCategory.get('pwa-fast-reliable') || []),\n  };\n}\n\n/** @param {{status: PWABadgeStatus}} props */\nexport const PWAGauge = props => {\n  const {status} = props;\n  const all = status.optimized && status.installable && status.fastAndReliable;\n\n  return (\n    <div\n      className={clsx('pwa-gauge', {\n        'pwa-gauge--all': all,\n        'pwa-gauge--pwa-optimized': !all && status.optimized,\n        'pwa-gauge--pwa-installable': !all && status.installable,\n        'pwa-gauge--pwa-fast-reliable': !all && status.fastAndReliable,\n      })}\n    >\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 60 60\">\n        <defs>\n          <linearGradient\n            id=\"pwa-gauge__check-circle__gradient\"\n            x1=\"50%\"\n            y1=\"0%\"\n            x2=\"50%\"\n            y2=\"100%\"\n          >\n            <stop stop-color=\"#00C852\" offset=\"0%\" />\n            <stop stop-color=\"#009688\" offset=\"100%\" />\n          </linearGradient>\n          <linearGradient\n            id=\"pwa-gauge__installable__shadow-gradient\"\n            x1=\"76.056%\"\n            x2=\"24.111%\"\n            y1=\"82.995%\"\n            y2=\"24.735%\"\n          >\n            <stop stop-color=\"#A5D6A7\" offset=\"0%\" />\n            <stop stop-color=\"#80CBC4\" offset=\"100%\" />\n          </linearGradient>\n          <linearGradient\n            id=\"pwa-gauge__fast-reliable__shadow-gradient\"\n            x1=\"76.056%\"\n            y1=\"82.995%\"\n            x2=\"25.678%\"\n            y2=\"26.493%\"\n          >\n            <stop stop-color=\"#64B5F6\" offset=\"0%\" />\n            <stop stop-color=\"#2979FF\" offset=\"100%\" />\n          </linearGradient>\n\n          <g id=\"pwa-gauge__fast-reliable-badge\">\n            <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"10\" r=\"10\" />\n            <path\n              fill=\"#304FFE\"\n              d=\"M10 3.58l5.25 2.34v3.5c0 3.23-2.24 6.26-5.25 7-3.01-.74-5.25-3.77-5.25-7v-3.5L10 3.58zm-.47 10.74l2.76-4.83.03-.07c.04-.08 0-.24-.22-.24h-1.64l.47-3.26h-.47l-2.7 4.77c-.02.01.05-.1-.04.05-.09.16-.1.31.18.31h1.63l-.47 3.27h.47z\"\n            />\n          </g>\n          <g id=\"pwa-gauge__installable-badge\">\n            <circle fill=\"#FFFFFF\" cx=\"10\" cy=\"10\" r=\"10\" />\n            <path\n              fill=\"#009688\"\n              d=\"M10 4.167A5.835 5.835 0 0 0 4.167 10 5.835 5.835 0 0 0 10 15.833 5.835 5.835 0 0 0 15.833 10 5.835 5.835 0 0 0 10 4.167zm2.917 6.416h-2.334v2.334H9.417v-2.334H7.083V9.417h2.334V7.083h1.166v2.334h2.334v1.166z\"\n            />\n          </g>\n        </defs>\n\n        <g stroke=\"none\" fill-rule=\"nonzero\">\n          {/* Background and PWA logo (color by default) */}\n          <circle class=\"pwa-gauge__disc\" cx=\"30\" cy=\"30\" r=\"30\" />\n          <g class=\"pwa-gauge__logo\">\n            <path\n              class=\"pwa-gauge__logo--secondary-color\"\n              d=\"M35.66 19.39l.7-1.75h2L37.4 15 38.6 12l3.4 9h-2.51l-.58-1.61z\"\n            />\n            <path\n              class=\"pwa-gauge__logo--primary-color\"\n              d=\"M33.52 21l3.65-9h-2.42l-2.5 5.82L30.5 12h-1.86l-1.9 5.82-1.35-2.65-1.21 3.72L25.4 21h2.38l1.72-5.2 1.64 5.2z\"\n            />\n            <path\n              class=\"pwa-gauge__logo--secondary-color\"\n              fill-rule=\"nonzero\"\n              d=\"M20.3 17.91h1.48c.45 0 .85-.05 1.2-.15l.39-1.18 1.07-3.3a2.64 2.64 0 0 0-.28-.37c-.55-.6-1.36-.91-2.42-.91H18v9h2.3V17.9zm1.96-3.84c.22.22.33.5.33.87 0 .36-.1.65-.29.87-.2.23-.59.35-1.15.35h-.86v-2.41h.87c.52 0 .89.1 1.1.32z\"\n            />\n          </g>\n\n          {/* No badges. */}\n          <rect\n            class=\"pwa-gauge__component pwa-gauge__na-line\"\n            fill=\"#FFFFFF\"\n            x=\"20\"\n            y=\"32\"\n            width=\"20\"\n            height=\"4\"\n            rx=\"2\"\n          />\n\n          {/* Just fast and reliable. */}\n          <g\n            class=\"pwa-gauge__component pwa-gauge__fast-reliable-badge\"\n            transform=\"translate(20, 29)\"\n          >\n            <path\n              fill=\"url(#pwa-gauge__fast-reliable__shadow-gradient)\"\n              d=\"M33.63 19.49A30 30 0 0 1 16.2 30.36L3 17.14 17.14 3l16.49 16.49z\"\n            />\n            <use href=\"#pwa-gauge__fast-reliable-badge\" />\n          </g>\n\n          {/* Just installable. */}\n          <g\n            class=\"pwa-gauge__component pwa-gauge__installable-badge\"\n            transform=\"translate(20, 29)\"\n          >\n            <path\n              fill=\"url(#pwa-gauge__installable__shadow-gradient)\"\n              d=\"M33.629 19.487c-4.272 5.453-10.391 9.39-17.415 10.869L3 17.142 17.142 3 33.63 19.487z\"\n            />\n            <use href=\"#pwa-gauge__installable-badge\" />\n          </g>\n\n          {/* Fast and reliable and installable. */}\n          <g class=\"pwa-gauge__component pwa-gauge__fast-reliable-installable-badges\">\n            <g transform=\"translate(8, 29)\">\n              {/* fast and reliable */}\n              <path\n                fill=\"url(#pwa-gauge__fast-reliable__shadow-gradient)\"\n                d=\"M16.321 30.463L3 17.143 17.142 3l22.365 22.365A29.864 29.864 0 0 1 22 31c-1.942 0-3.84-.184-5.679-.537z\"\n              />\n              <use href=\"#pwa-gauge__fast-reliable-badge\" />\n            </g>\n            <g transform=\"translate(32, 29)\">\n              {/* installable */}\n              <path\n                fill=\"url(#pwa-gauge__installable__shadow-gradient)\"\n                d=\"M25.982 11.84a30.107 30.107 0 0 1-13.08 15.203L3 17.143 17.142 3l8.84 8.84z\"\n              />\n              <use href=\"#pwa-gauge__installable-badge\" />\n            </g>\n          </g>\n\n          {/* Full PWA. */}\n          <g class=\"pwa-gauge__component pwa-gauge__check-circle\" transform=\"translate(18, 28)\">\n            <circle fill=\"#FFFFFF\" cx=\"12\" cy=\"12\" r=\"12\" />\n            <path\n              fill=\"url(#pwa-gauge__check-circle__gradient)\"\n              d=\"M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"\n            />\n          </g>\n        </g>\n      </svg>\n    </div>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './lhr-comparison-scores.css';\nimport clsx from 'clsx';\n\nimport {Gauge} from '../../components/gauge';\nimport {\n  PWAGauge,\n  getBadgeStatus,\n  FastReliableIcon,\n  InstallableIcon,\n  OptimizedIcon,\n  getBadgeDiffType,\n} from '../../components/pwa-gauge';\nimport {ScoreDeltaBadge} from '../../components/score-delta-badge';\n\n/** @param {{lhr: LH.Result, baseLhr?: LH.Result, categoryId: string}} props */\nconst StandardScoreItem = props => {\n  const {lhr, baseLhr, categoryId} = props;\n  const category = lhr.categories[categoryId];\n  const baseCategory = baseLhr && baseLhr.categories[categoryId];\n  /** @type {LHCI.NumericAuditDiff|undefined} */\n  const diff = baseCategory && {\n    auditId: '',\n    type: 'score',\n    baseValue: baseCategory.score,\n    compareValue: category.score,\n  };\n\n  return (\n    <div key={categoryId} className={clsx('lhr-comparison-scores-item')}>\n      <Gauge score={category.score} diff={diff} />\n      <div className=\"lhr-comparison-scores-item__label\">{category.title}</div>\n      {diff ? <ScoreDeltaBadge diff={diff} className=\"lhr-comparison-scores-item__delta\" /> : null}\n    </div>\n  );\n};\n\n/** @param {{lhr: LH.Result, baseLhr?: LH.Result, categoryId: string}} props */\nconst PwaScoreItem = props => {\n  const {lhr, baseLhr, categoryId} = props;\n  const compareStatus = getBadgeStatus(lhr);\n  let deltaEl;\n  const overallStatus = 'neutral';\n\n  if (baseLhr) {\n    const baseStatus = getBadgeStatus(baseLhr);\n    const diffTypes = {\n      fastAndReliable: getBadgeDiffType(baseStatus, compareStatus, 'fastAndReliable'),\n      installable: getBadgeDiffType(baseStatus, compareStatus, 'installable'),\n      optimized: getBadgeDiffType(baseStatus, compareStatus, 'optimized'),\n    };\n    const allEqual = Object.values(diffTypes).every(type => type === 'neutral');\n\n    const individualBadges = (\n      <Fragment>\n        {diffTypes.fastAndReliable === 'neutral' ? (\n          <Fragment />\n        ) : (\n          <FastReliableIcon deltaType={diffTypes.fastAndReliable} />\n        )}\n        {diffTypes.installable === 'neutral' ? (\n          <Fragment />\n        ) : (\n          <InstallableIcon deltaType={diffTypes.installable} />\n        )}\n        {diffTypes.optimized === 'neutral' ? (\n          <Fragment />\n        ) : (\n          <OptimizedIcon deltaType={diffTypes.optimized} />\n        )}\n      </Fragment>\n    );\n\n    deltaEl = (\n      <div className={clsx('lhr-comparison-scores-item__delta')}>\n        {allEqual ? '-' : individualBadges}\n      </div>\n    );\n  }\n\n  return (\n    <div\n      key={categoryId}\n      className={clsx(\n        'lhr-comparison-scores-item',\n        `lhr-comparison-scores-item--pwa`,\n        `lhr-comparison-scores-item--${overallStatus}`\n      )}\n    >\n      <PWAGauge status={compareStatus} />\n      <div className=\"lhr-comparison-scores-item__label\">PWA</div>\n      {deltaEl}\n    </div>\n  );\n};\n\n/**\n * @param {{lhr?: LH.Result, baseLhr?: LH.Result}} props\n */\nexport const LhrComparisonScores = props => {\n  const {lhr, baseLhr} = props;\n  if (!lhr) return null;\n\n  const categoryIds = Object.keys(lhr.categories);\n\n  return (\n    <div className=\"lhr-comparison-scores\">\n      {categoryIds\n        .sort((idA, idB) => {\n          const sortKeyA = idA === 'pwa' ? Infinity : categoryIds.indexOf(idA);\n          const sortKeyB = idB === 'pwa' ? Infinity : categoryIds.indexOf(idB);\n          return sortKeyA - sortKeyB;\n        })\n        .map(id => {\n          return id === 'pwa' ? (\n            <PwaScoreItem lhr={lhr} baseLhr={baseLhr} categoryId={id} />\n          ) : (\n            <StandardScoreItem lhr={lhr} baseLhr={baseLhr} categoryId={id} />\n          );\n        })}\n    </div>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport './audit-group.css';\nimport {Paper} from '../../../components/paper';\nimport {ScoreIcon} from '../../../components/score-icon';\nimport clsx from 'clsx';\nimport {AuditDiff} from './audit-diff';\nimport {useState} from 'preact/hooks';\nimport {openLhrInClassicViewer} from '../../../components/lhr-viewer-link';\n\n/** @typedef {{key?: string, group: {id: string, title: string}, selectedAuditId: string|null, setSelectedAuditId: (id: string|null) => void, pairs: Array<LHCI.AuditPair>, baseLhr?: LH.Result, showAsNarrow: boolean, showAsUnchanged: boolean}} Props */\n\n/** @param {Props & {showAsBigPicture: boolean, setShowAsBigPicture: (b: boolean) => void}} props */\nconst MetricsTabHeader = props => {\n  return (\n    <div className=\"audit-group__big-picture-tabs\">\n      <span\n        className={clsx('big-picture-tabs__tab', {\n          'big-picture-tabs__tab--selected': props.showAsBigPicture,\n        })}\n        onClick={() => props.setShowAsBigPicture(true)}\n      >\n        Overview\n      </span>\n      <span\n        className={clsx('big-picture-tabs__tab', {\n          'big-picture-tabs__tab--selected': !props.showAsBigPicture,\n        })}\n        onClick={() => props.setShowAsBigPicture(false)}\n      >\n        Magnified\n      </span>\n    </div>\n  );\n};\n\n/** @param {Props & {showAsBigPicture: boolean}} props */\nconst ChangedAuditList = props => {\n  return (\n    <Fragment>\n      {props.pairs.map(pair => {\n        const {audit} = pair;\n\n        // Only metrics are allowed to display the numericValue diff in this view.\n        if (props.group.id !== 'metrics') {\n          pair = {...pair, diffs: pair.diffs.filter(diff => diff.type !== 'numericValue')};\n        }\n\n        return (\n          <div\n            key={audit.id}\n            className={clsx('audit-group__audit')}\n            onClick={() => props.setSelectedAuditId(audit.id || null)}\n          >\n            <div className=\"audit-group__audit-score\">\n              <ScoreIcon score={audit.score || 0} />\n            </div>\n            <div className=\"audit-group__audit-title\">{audit.title}</div>\n            <div className=\"audit-group__audit-diff\">\n              <AuditDiff\n                pair={pair}\n                showAsBigPicture={props.showAsBigPicture}\n                showAsNarrow={props.showAsNarrow}\n              />\n            </div>\n          </div>\n        );\n      })}\n    </Fragment>\n  );\n};\n\n/** @param {Props & {expanded: boolean}} props */\nconst UnchangedAuditList = props => {\n  const baseLhr = props.baseLhr;\n  if (!baseLhr || !props.expanded) return <Fragment />;\n\n  return (\n    <Fragment>\n      {props.pairs.map(pair => {\n        const {audit} = pair;\n\n        return (\n          <div\n            key={audit.id}\n            className={clsx('audit-group__audit', 'audit-group__audit--unchanged')}\n            onClick={e => {\n              e.preventDefault();\n              e.stopPropagation();\n              openLhrInClassicViewer(baseLhr);\n            }}\n          >\n            <div className=\"audit-group__audit-score\">\n              <ScoreIcon score={audit.score || 0} />\n            </div>\n            <div className=\"audit-group__audit-title\">{audit.title}</div>\n            <div className=\"audit-group__audit-diff\">Open Report</div>\n          </div>\n        );\n      })}\n    </Fragment>\n  );\n};\n\n/** @param {Props} props */\nexport const AuditGroup = props => {\n  const {group} = props;\n  const [showAsBigPicture, setShowAsBigPicture] = useState(group.id === 'metrics');\n  const [expanded, setExpanded] = useState(false);\n\n  return (\n    <Paper\n      className={clsx('audit-group', {\n        'audit-group--expanded': expanded,\n        'audit-group--unchanged': props.showAsUnchanged,\n      })}\n    >\n      <div className=\"audit-group__header\" onClick={() => setExpanded(!expanded)}>\n        <div className=\"audit-group__title\">\n          {group.title} {props.showAsUnchanged ? `(${props.pairs.length})` : ''}\n        </div>\n        <div className=\"audit-group__expand-toggle\">\n          <i className=\"material-icons\">chevron_right</i>\n        </div>\n        {group.id === 'metrics' && !props.showAsNarrow ? (\n          <MetricsTabHeader\n            {...props}\n            showAsBigPicture={showAsBigPicture}\n            setShowAsBigPicture={setShowAsBigPicture}\n          />\n        ) : (\n          <Fragment />\n        )}\n      </div>\n      <div className=\"audit-group__audits\">\n        {props.showAsUnchanged ? (\n          <UnchangedAuditList {...props} expanded={expanded} />\n        ) : (\n          <ChangedAuditList {...props} showAsBigPicture={showAsBigPicture} />\n        )}\n      </div>\n    </Paper>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './lhr-comparison-legend.css';\nimport {ScoreIcon} from '../../components/score-icon';\n\nexport const LhrComparisonLegend = () => {\n  return (\n    <div className=\"lhr-comparison-legend\">\n      <ScoreIcon score={0} />\n      <span className=\"lhr-comparison-legend__label\">0-49</span>\n      <ScoreIcon score={0.5} />\n      <span className=\"lhr-comparison-legend__label\">50-89</span>\n      <ScoreIcon score={1} />\n      <span className=\"lhr-comparison-legend__label\">90-100</span>\n      <i className=\"lhr-comparison-legend__chip lhr-comparison-legend__chip--regression\" />\n      <span className=\"lhr-comparison-legend__label\">Regression</span>\n      <i className=\"lhr-comparison-legend__chip lhr-comparison-legend__chip--improvement\" />\n      <span className=\"lhr-comparison-legend__label\">Improvement</span>\n    </div>\n  );\n};\n","import { hydrate, render as preactRender, cloneElement as preactCloneElement, createRef, h, Component, options, toChildArray, createContext, Fragment, _unmount } from 'preact';\nimport { useState, useReducer, useEffect, useLayoutEffect, useRef, useImperativeHandle, useMemo, useCallback, useContext, useDebugValue } from 'preact/hooks';\nimport { Suspense, lazy } from './suspense';\nimport { assign, removeNode } from '../../src/util';\n\nconst version = '16.8.0'; // trick libraries to think we are react\n\n/* istanbul ignore next */\nconst REACT_ELEMENT_TYPE = (typeof Symbol!=='undefined' && Symbol.for && Symbol.for('react.element')) || 0xeac7;\n\nconst CAMEL_PROPS = /^(?:accent|alignment|arabic|baseline|cap|clip|color|fill|flood|font|glyph|horiz|marker|overline|paint|stop|strikethrough|stroke|text|underline|unicode|units|v|vector|vert|word|writing|x)[A-Z]/;\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\t/* istanbul ignore next */\n\tif (oldEventHook) e = oldEventHook(e);\n\te.persist = () => {};\n\treturn e.nativeEvent = e;\n};\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Normalize DOM vnode properties.\n * @param {import('./internal').VNode} vnode The vnode to normalize props of\n * @param {object | null | undefined} props props to normalize\n */\nfunction handleElementVNode(vnode, props) {\n\tlet shouldSanitize, attrs, i;\n\tfor (i in props) if ((shouldSanitize = CAMEL_PROPS.test(i))) break;\n\tif (shouldSanitize) {\n\t\tattrs = vnode.props = {};\n\t\tfor (i in props) {\n\t\t\tattrs[CAMEL_PROPS.test(i) ? i.replace(/([A-Z0-9])/, '-$1').toLowerCase() : i] = props[i];\n\t\t}\n\t}\n}\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nfunction render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children==null) {\n\t\twhile (parent.firstChild) {\n\t\t\tremoveNode(parent.firstChild);\n\t\t}\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback==='function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nclass ContextProvider {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender(props) {\n\t\treturn props.children;\n\t}\n}\n\n/**\n * Portal component\n * @param {object | null | undefined} props\n */\nfunction Portal(props) {\n\tlet _this = this;\n\tlet container = props.container;\n\tlet wrap = h(ContextProvider, { context: _this.context }, props.vnode);\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t\t_this._hasMounted = false;\n\t}\n\n\t// When props.vnode is undefined/false/null we are dealing with some kind of\n\t// conditional vnode. This should not trigger a render.\n\tif (props.vnode) {\n\t\tif (!_this._hasMounted) {\n\t\t\t// Create a placeholder that we can use to insert into.\n\t\t\t_this._temp = document.createTextNode('');\n\t\t\t// Hydrate existing nodes to keep the dom intact, when rendering\n\t\t\t// wrap into the container.\n\t\t\thydrate('', container);\n\t\t\t// Append to the container (this matches React's behavior)\n\t\t\tcontainer.appendChild(_this._temp);\n\t\t\t// At this point we have mounted and should set our container.\n\t\t\t_this._hasMounted = true;\n\t\t\t_this._container = container;\n\t\t\t// Render our wrapping element into temp.\n\t\t\tpreactRender(wrap, container, _this._temp);\n\t\t\t_this._children = this._temp._children;\n\t\t}\n\t\telse {\n\t\t\t// When we have mounted and the vnode is present it means the\n\t\t\t// props have changed or a parent is triggering a rerender.\n\t\t\t// This implies we only need to call render. But we need to keep\n\t\t\t// the old tree around, otherwise will treat the vnodes as new and\n\t\t\t// will wrongly call `componentDidMount` on them\n\t\t\tcontainer._children = _this._children;\n\t\t\tpreactRender(wrap, container);\n\t\t\t_this._children = container._children;\n\t\t}\n\t}\n\t// When we come from a conditional render, on a mounted\n\t// portal we should clear the DOM.\n\telse if (_this._hasMounted) {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t}\n\t// Set the wrapping element for future unmounting.\n\t_this._wrap = wrap;\n\n\t_this.componentWillUnmount = () => {\n\t\tif (_this._temp.parentNode) _this._container.removeChild(_this._temp);\n\t\t_unmount(_this._wrap);\n\t};\n\n\treturn null;\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nfunction createPortal(vnode, container) {\n\treturn h(Portal, { vnode, container });\n}\n\nconst mapFn = (children, fn) => {\n\tif (!children) return null;\n\treturn toChildArray(children).map(fn);\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nlet Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tchildren = toChildArray(children);\n\t\tif (children.length!==1) throw new Error('Children.only() expects only one child.');\n\t\treturn children[0];\n\t},\n\ttoArray: toChildArray\n};\n\n/**\n * Wrap `createElement` to apply various vnode normalizations.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n * @param {object | null | undefined} [props] The vnode's properties\n * @param {Array<import('./internal').ComponentChildren>} [children] The vnode's children\n * @returns {import('./internal').VNode}\n */\nfunction createElement(...args) {\n\tlet vnode = h(...args);\n\n\tlet type = vnode.type, props = vnode.props;\n\tif (typeof type!='function') {\n\t\tif (props.defaultValue) {\n\t\t\tif (!props.value && props.value!==0) {\n\t\t\t\tprops.value = props.defaultValue;\n\t\t\t}\n\t\t\tdelete props.defaultValue;\n\t\t}\n\n\t\tif (Array.isArray(props.value) && props.multiple && type==='select') {\n\t\t\ttoChildArray(props.children).forEach((child) => {\n\t\t\t\tif (props.value.indexOf(child.props.value)!=-1) {\n\t\t\t\t\tchild.props.selected = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdelete props.value;\n\t\t}\n\t\thandleElementVNode(vnode, props);\n\t}\n\n\tvnode.preactCompatNormalized = false;\n\treturn normalizeVNode(vnode);\n}\n\n/**\n * Normalize a vnode\n * @param {import('./internal').VNode} vnode\n */\nfunction normalizeVNode(vnode) {\n\tvnode.preactCompatNormalized = true;\n\tapplyClassName(vnode);\n\treturn vnode;\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\tlet vnode = normalizeVNode(preactCloneElement.apply(null, arguments));\n\treturn vnode;\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof===REACT_ELEMENT_TYPE;\n}\n\n/**\n * Normalize event handlers like react does. Most famously it uses `onChange` for any input element.\n * @param {import('./internal').VNode} vnode The vnode to normalize events on\n */\nfunction applyEventNormalization({ type, props }) {\n\tif (!props || typeof type!='string') return;\n\tlet newProps = {};\n\n\tfor (let i in props) {\n\t\tif (/^on(Ani|Tra)/.test(i)) {\n\t\t\tprops[i.toLowerCase()] = props[i];\n\t\t\tdelete props[i];\n\t\t}\n\t\tnewProps[i.toLowerCase()] = i;\n\n\t}\n\tif (newProps.ondoubleclick) {\n\t\tprops.ondblclick = props[newProps.ondoubleclick];\n\t\tdelete props[newProps.ondoubleclick];\n\t}\n\tif (newProps.onbeforeinput) {\n\t\tprops.onbeforeinput = props[newProps.onbeforeinput];\n\t\tdelete props[newProps.onbeforeinput];\n\t}\n\t// for *textual inputs* (incl textarea), normalize `onChange` -> `onInput`:\n\tif (newProps.onchange && (type==='textarea' || (type.toLowerCase()==='input' && !/^fil|che|ra/i.test(props.type)))) {\n\t\tlet normalized = newProps.oninput || 'oninput';\n\t\tif (!props[normalized]) {\n\t\t\tprops[normalized] = props[newProps.onchange];\n\t\t\tdelete props[newProps.onchange];\n\t\t}\n\t}\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Alias `class` prop to `className` if available\n * @param {import('./internal').VNode} vnode\n */\nfunction applyClassName(vnode) {\n\tlet a = vnode.props;\n\tif (a.class || a.className) {\n\t\tclassNameDescriptor.enumerable = 'className' in a;\n\t\tif (a.className) a.class = a.className;\n\t\tObject.defineProperty(a, 'className', classNameDescriptor);\n\t}\n}\n\nlet classNameDescriptor = {\n\tconfigurable: true,\n\tget() { return this.class; }\n};\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nfunction shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i]!==b[i]) return true;\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn component && (component.base || component.nodeType === 1 && component) || null;\n}\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nclass PureComponent extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// Some third-party libraries check if this property is present\n\t\tthis.isPureReactComponent = true;\n\t}\n\n\tshouldComponentUpdate(props, state) {\n\t\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n\t}\n}\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionalComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionalComponent}\n */\nfunction memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref==nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\t\treturn (!comparer\n\t\t\t? shallowDiffers(this.props, nextProps)\n\t\t\t: !comparer(this.props, nextProps)) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn h(c, assign({}, props));\n\t}\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed._forwarded = true;\n\treturn Memoed;\n}\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./internal').ForwardFn} fn\n * @returns {import('./internal').FunctionalComponent}\n */\nfunction forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet ref = props.ref;\n\t\tdelete props.ref;\n\t\treturn fn(props, ref);\n\t}\n\tForwarded.prototype.isReactComponent = true;\n\tForwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n\n// Patch in `UNSAFE_*` lifecycle hooks\nfunction setSafeDescriptor(proto, key) {\n\tif (proto['UNSAFE_'+key] && !proto[key]) {\n\t\tObject.defineProperty(proto, key, {\n\t\t\tconfigurable: false,\n\t\t\tget() { return this['UNSAFE_' + key]; },\n\t\t\tset(v) { this['UNSAFE_' + key] = v; }\n\t\t});\n\t}\n}\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tapplyEventNormalization(vnode);\n\tlet type = vnode.type;\n\tif (type && type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\n\t// We can't just patch the base component class, because components that use\n\t// inheritance and are transpiled down to ES5 will overwrite our patched\n\t// getters and setters. See #1941\n\tif (typeof type === 'function' && !type._patchedLifecycles && type.prototype) {\n\t\tsetSafeDescriptor(type.prototype, 'componentWillMount');\n\t\tsetSafeDescriptor(type.prototype, 'componentWillReceiveProps');\n\t\tsetSafeDescriptor(type.prototype, 'componentWillUpdate');\n\t\ttype._patchedLifecycles = true;\n\t}\n\t/* istanbul ignore next */\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\trender as hydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tSuspense,\n\tlazy\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate: render,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tunstable_batchedUpdates,\n\tSuspense,\n\tlazy\n};\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { Component, createElement, _unmount as unmount, options } from 'preact';\nimport { removeNode } from '../../src/util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function (error, newVNode, oldVNode) {\n\tif (error.then && oldVNode) {\n\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; vnode = vnode._parent;) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (oldVNode) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\n\t\t\t\tcomponent._childDidSuspend(error);\n\t\t\t\treturn; // Don't call oldCatchError if we found a Suspense\n\t\t\t}\n\t\t}\n\t}\n\n\toldCatchError(error, newVNode, oldVNode);\n};\n\nfunction detachDom(children) {\n\tfor (let i = 0; i < children.length; i++) {\n\t\tlet child = children[i];\n\t\tif (child != null) {\n\t\t\tif (typeof child.type !== 'function' && child._dom) {\n\t\t\t\tremoveNode(child._dom);\n\t\t\t}\n\t\t\telse if (child._children) {\n\t\t\t\tdetachDom(child._children);\n\t\t\t}\n\t\t}\n\t}\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._suspensions = [];\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @param {Promise} promise The thrown promise\n */\nSuspense.prototype._childDidSuspend = function(promise) {\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\tc._suspensions.push(promise);\n\n\tconst onSuspensionComplete = () => {\n\t\t// From https://twitter.com/Rich_Harris/status/1125850391155965952\n\t\tc._suspensions[c._suspensions.indexOf(promise)] = c._suspensions[c._suspensions.length - 1];\n\t\tc._suspensions.pop();\n\n\t\tif (c._suspensions.length == 0) {\n\t\t\tunmount(c.props.fallback);\n\t\t\tc._vnode._dom = null;\n\n\t\t\tc._vnode._children = c.state._parkedChildren;\n\t\t\tc.setState({ _parkedChildren: null });\n\t\t}\n\t};\n\n\tif (c.state._parkedChildren == null) {\n\t\tc.setState({ _parkedChildren: c._vnode._children });\n\t\tdetachDom(c._vnode._children);\n\t\tc._vnode._children = [];\n\t}\n\n\tpromise.then(onSuspensionComplete, onSuspensionComplete);\n};\n\nSuspense.prototype.render = function(props, state) {\n\treturn state._parkedChildren ? props.fallback : props.children;\n};\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component;\n\tlet error;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\t(exports) => { component = exports.default; },\n\t\t\t\t(e) => { error = e; },\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!component) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn createElement(component, props);\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n","/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport {createPortal, useRef, useEffect} from 'preact/compat';\nimport clsx from 'clsx';\nimport './modal.css';\n\n/** @param {{className?: string, children: LHCI.PreactNode, onClose: () => void}} props */\nexport const Modal = props => {\n  const modalRootRef = useRef(\n    document.getElementById('preact-modal-root') || document.createElement('div')\n  );\n\n  useEffect(() => {\n    modalRootRef.current.id = 'preact-modal-root';\n    document.body.appendChild(modalRootRef.current);\n    return () => document.body.removeChild(modalRootRef.current);\n  }, []);\n\n  return createPortal(\n    <div className=\"modal-backdrop\">\n      <div className={clsx('modal', props.className)} style={{position: 'relative'}}>\n        {props.children}\n        <div className=\"modal__close\" onClick={props.onClose}>\n          <i className=\"material-icons\">close</i>\n        </div>\n      </div>\n    </div>,\n    modalRootRef.current\n  );\n};\n","/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h} from 'preact';\nimport './lhr-comparison-runtime-diff.css';\nimport clsx from 'clsx';\n\n/** @typedef {{label: string, base: string, compare: string, severity: 'warn'|'error'}} RuntimeDiff */\n\n/** @param {any} value */\nfunction getStringValueFromRawConfigSetting(value) {\n  if (typeof value === 'string') return value;\n  if (typeof value === 'number') return value.toString();\n  if (typeof value === 'undefined') return 'Unset';\n  if (typeof value === 'boolean') return value ? 'Enabled' : 'Disabled';\n  if (Array.isArray(value)) return value.join(', ');\n  return 'Unknown';\n}\n\n/**\n * @param {LH.Result} lhr\n * @param {LH.Result|undefined} baseLhr\n * @return {Array<RuntimeDiff>}\n */\nexport function computeRuntimeDiffs(lhr, baseLhr) {\n  if (!baseLhr) return [];\n\n  /** @type {Array<RuntimeDiff>} */\n  const diffs = [];\n\n  const {benchmarkIndex} = lhr.environment;\n  const {benchmarkIndex: baseBenchmarkIndex} = baseLhr.environment;\n  const benchmarkMultiplicativeDelta =\n    Math.abs(benchmarkIndex - baseBenchmarkIndex) / Math.min(benchmarkIndex, baseBenchmarkIndex);\n  if (benchmarkMultiplicativeDelta > 1.5) {\n    diffs.push({\n      label: 'CPU/Memory Power',\n      base: baseLhr.environment.benchmarkIndex.toString(),\n      compare: lhr.environment.benchmarkIndex.toString(),\n      severity: benchmarkMultiplicativeDelta > 2 ? 'error' : 'warn',\n    });\n  }\n\n  const settings = lhr.configSettings;\n  const baseSettings = baseLhr.configSettings;\n  const throttling = settings.throttling || {};\n  const baseThrottling = settings.throttling || {};\n  const potentialDiffs = [\n    ['Lighthouse Version', baseLhr.lighthouseVersion, lhr.lighthouseVersion],\n    ['Storage Reset', baseSettings.disableStorageReset, settings.disableStorageReset],\n    ['Emulated Form Factor', baseSettings.emulatedFormFactor, settings.emulatedFormFactor],\n    ['Throttling Method', baseSettings.throttlingMethod, settings.throttlingMethod],\n    ['CPU Throttling', baseThrottling.cpuSlowdownMultiplier, throttling.cpuSlowdownMultiplier],\n    ['Network RTT', baseThrottling.rttMs, throttling.rttMs],\n    ['Network Throughput', baseThrottling.throughputKbps, throttling.throughputKbps],\n    ['Network RTT', baseThrottling.requestLatencyMs, throttling.requestLatencyMs],\n    [\n      'Network Throughput (Up)',\n      baseThrottling.uploadThroughputKbps,\n      throttling.uploadThroughputKbps,\n    ],\n    [\n      'Network Throughput (Down)',\n      baseThrottling.downloadThroughputKbps,\n      throttling.downloadThroughputKbps,\n    ],\n  ];\n\n  for (const [label, rawBase, rawCompare] of potentialDiffs) {\n    const base = getStringValueFromRawConfigSetting(rawBase);\n    const compare = getStringValueFromRawConfigSetting(rawCompare);\n    if (base === compare) continue;\n    diffs.push({label, base, compare, severity: 'error'});\n  }\n\n  return diffs;\n}\n\n/**\n * @param {{diffs: Array<RuntimeDiff>, variant: 'mini'|'full'}} props\n */\nexport const LhrRuntimeDiff = props => {\n  const {diffs} = props;\n\n  return (\n    <div\n      className={clsx(\n        'lhr-comparison-runtime-diff',\n        `lhr-comparison-runtime-diff--${props.variant}`\n      )}\n    >\n      <div className=\"lhr-comparison__warning\">\n        <i className=\"material-icons\">info</i>\n        <div>\n          Changes of runtime settings or the environment can substantially affect your Lighthouse\n          scores and might be the reason for the differences here.\n        </div>\n      </div>\n      <div className=\"lhr-comparison-runtime-diff__diffs\">\n        The following runtime differences were detected:\n        <table>\n          <thead>\n            <tr>\n              <th />\n              <th>Base</th>\n              <th>Compare</th>\n            </tr>\n          </thead>\n          <tbody>\n            {diffs.map(diff => (\n              <tr key={diff.label}>\n                <td>{diff.label}</td>\n                <td>{diff.base}</td>\n                <td>{diff.compare}</td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n","/**\n * @license Copyright 2020 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {useState, useEffect} from 'preact/hooks';\nimport clsx from 'clsx';\nimport _ from '@lhci/utils/src/lodash';\nimport {findAuditDiffs, getDiffSeverity} from '@lhci/utils/src/audit-diff-finder';\n\nimport {Dropdown} from '../../components/dropdown';\nimport {AuditDetailPane} from './audit-detail/audit-detail-pane';\nimport {LhrComparisonScores} from './lhr-comparison-scores';\nimport {AuditGroup} from './audit-list/audit-group';\nimport {LhrComparisonLegend} from './lhr-comparison-legend';\nimport {Paper} from '../../components/paper';\nimport {LhrViewerLink} from '../../components/lhr-viewer-link';\n\nimport './lhr-comparison.css';\nimport {Modal} from '../../components/modal';\nimport {LhrRuntimeDiff, computeRuntimeDiffs} from './lhr-comparison-runtime-diff';\n\n/** @typedef {{id: string, pairs: Array<LHCI.AuditPair>, group: {id: string, title: string}, showAsUnchanged: boolean}} AuditGroupDef */\n\n/** @param {(s: string) => void} setAuditId */\nfunction useAuditPermalinkScrollOnLoad(setAuditId) {\n  /** @param {number} ms */\n  const wait = ms => new Promise(r => setTimeout(r, ms));\n\n  /** @param {string} selector */\n  const waitUntilSelector = async selector => {\n    let attempts = 0;\n    while (!document.querySelector(selector) && attempts < 10) {\n      await wait(500);\n      attempts++;\n    }\n  };\n\n  useEffect(() => {\n    if (window.location.hash.length <= 1) return;\n\n    Promise.resolve().then(async () => {\n      await waitUntilSelector('.lhr-comparison__audit-groups');\n      setAuditId(window.location.hash.slice(1));\n    });\n  }, []);\n}\n\n/**\n * @param {LH.Result} lhr\n * @param {LH.Result|undefined} baseLhr\n * @param {{percentAbsoluteDeltaThreshold: number}} options\n * @return {Array<AuditGroupDef>}\n */\nexport function computeAuditGroups(lhr, baseLhr, options) {\n  /** @type {Array<AuditGroupDef>} */\n  const auditGroups = [];\n\n  for (const [categoryId, category] of Object.entries(lhr.categories)) {\n    const categoryAsGroup = {title: category.title, description: category.description};\n    const auditRefsGroupedByGroup = _.groupBy(category.auditRefs, ref => ref.group);\n\n    const unchangedAuditsGroupId = `unchanged:${categoryId}`;\n    /** @type {AuditGroupDef} */\n    const unchangedAuditsGroup = {\n      id: unchangedAuditsGroupId,\n      group: {id: unchangedAuditsGroupId, title: `Unchanged Audits - ${category.title}`},\n      pairs: [],\n      showAsUnchanged: true,\n    };\n\n    for (const auditRefGroup of auditRefsGroupedByGroup) {\n      let groupId = auditRefGroup[0].group || '';\n      let groupWithoutId = lhr.categoryGroups && lhr.categoryGroups[groupId];\n      if (!groupWithoutId) {\n        // Only use the category as the group if the entire category is ungrouped.\n        // The lack of a category when the category otherwise uses groups means it's hidden.\n        if (auditRefsGroupedByGroup.length !== 1) continue;\n        groupId = `category:${categoryId}`;\n        groupWithoutId = categoryAsGroup;\n      }\n      const group = {...groupWithoutId, id: groupId};\n\n      const pairs = auditRefGroup\n        .map(ref => {\n          const audit = {...lhr.audits[ref.id], id: ref.id};\n          const baseAudit = baseLhr && baseLhr.audits[audit.id || ''];\n          const diffs = baseAudit\n            ? findAuditDiffs(baseAudit, audit, {...options, synthesizeItemKeyDiffs: true})\n            : [];\n          const maxSeverity = Math.max(...diffs.map(getDiffSeverity), 0);\n          return {audit, baseAudit, diffs, maxSeverity, group};\n        })\n        .sort((a, b) => (a.audit.score || 0) - (b.audit.score || 0));\n\n      const pairsWithDiffs = pairs.filter(pair => !pair.baseAudit || pair.diffs.length);\n      const pairsWithoutDiffs = pairs.filter(pair => pair.baseAudit && !pair.diffs.length);\n      if (pairsWithDiffs.length) {\n        auditGroups.push({id: groupId, group, pairs: pairsWithDiffs, showAsUnchanged: false});\n      }\n      if (pairsWithoutDiffs.length) {\n        unchangedAuditsGroup.pairs.push(...pairsWithoutDiffs);\n      }\n    }\n\n    if (unchangedAuditsGroup.pairs.length) {\n      auditGroups.push(unchangedAuditsGroup);\n    }\n  }\n\n  return auditGroups;\n}\n\n/** @param {{hookElements: LHCI.HookElements<'dropdowns'>, selectedAuditId?: string | null, lhr?: LH.Result, baseLhr?: LH.Result, percentAbsoluteDeltaThreshold: number, setPercentAbsoluteDeltaThreshold: (x: number) => void}} props */\nconst LhrComparisonScoresAndUrl = props => {\n  return (\n    <div className=\"lhr-comparison__scores-and-dropdowns\">\n      <div className=\"container\">\n        <div className=\"lhr-comparison__dropdowns\">\n          {props.hookElements.dropdowns}\n          <Dropdown\n            label=\"Threshold\"\n            value={props.percentAbsoluteDeltaThreshold.toString()}\n            setValue={value => {\n              props.setPercentAbsoluteDeltaThreshold(Number(value));\n            }}\n            options={[\n              {value: '0', label: '0%'},\n              {value: '0.05', label: '5%'},\n              {value: '0.1', label: '10%'},\n              {value: '0.15', label: '15%'},\n              {value: '0.25', label: '25%'},\n            ]}\n          />\n        </div>\n        {props.selectedAuditId ? <Fragment /> : <LhrComparisonScores {...props} />}\n      </div>\n    </div>\n  );\n};\n\n/** @param {{auditGroups: Array<AuditGroupDef|undefined>, baseLhr?: LH.Result, selectedAuditId: string|null, setSelectedAuditId: (id: string|null) => void, showAsNarrow: boolean}} props */\nconst AuditGroups = props => {\n  return (\n    <div className=\"lhr-comparison__audit-groups\">\n      {props.auditGroups.map(auditGroup => {\n        if (!auditGroup) return undefined;\n        return (\n          <AuditGroup\n            key={auditGroup.id}\n            showAsNarrow={props.showAsNarrow}\n            showAsUnchanged={auditGroup.showAsUnchanged}\n            pairs={auditGroup.pairs}\n            group={auditGroup.group}\n            baseLhr={props.baseLhr}\n            selectedAuditId={props.selectedAuditId}\n            setSelectedAuditId={props.setSelectedAuditId}\n          />\n        );\n      })}\n    </div>\n  );\n};\n\n/** @param {{lhr: LH.Result, baseLhr: LH.Result|undefined, hookElements: LHCI.HookElements<'dropdowns'|'warnings'>, className?: string}} props */\nexport const LhrComparison = props => {\n  const {lhr, baseLhr} = props;\n  const defaultAck = /** @type {'none'|'acknowledged'|'closed'} */ ('none');\n  const [percentAbsoluteDeltaThreshold, setDiffThreshold] = useState(0.05);\n  const [selectedAuditId, setAuditId] = useState(/** @type {string|null} */ (null));\n  const [runtimeDiffAck, setRuntimeDiffAck] = useState(defaultAck);\n  useAuditPermalinkScrollOnLoad(setAuditId);\n\n  // Attach the LHRs to the window for easy debugging.\n  useEffect(() => {\n    // @ts-ignore\n    window.__LHR__ = lhr;\n    // @ts-ignore\n    window.__BASE_LHR__ = baseLhr;\n  }, [lhr, baseLhr]);\n\n  const runtimeDiffs = computeRuntimeDiffs(lhr, baseLhr);\n  const runtimeDiffsHaveError = runtimeDiffs.some(diff => diff.severity === 'error');\n  const auditGroups = computeAuditGroups(lhr, baseLhr, {percentAbsoluteDeltaThreshold});\n\n  return (\n    <Fragment>\n      {runtimeDiffAck === 'none' && runtimeDiffsHaveError ? (\n        <Modal onClose={() => setRuntimeDiffAck('acknowledged')}>\n          <LhrRuntimeDiff diffs={runtimeDiffs} variant=\"full\" />\n        </Modal>\n      ) : null}\n      {selectedAuditId ? (\n        <AuditDetailPane\n          selectedAuditId={selectedAuditId}\n          setSelectedAuditId={setAuditId}\n          pairs={auditGroups\n            .filter(group => !group.showAsUnchanged)\n            .map(group => group.pairs)\n            .reduce((a, b) => a.concat(b))}\n          baseLhr={baseLhr}\n        />\n      ) : (\n        <Fragment />\n      )}\n      <div\n        className={clsx('lhr-comparison', props.className, {\n          'lhr-comparison--with-audit-selection': !!selectedAuditId,\n        })}\n      >\n        <LhrComparisonScoresAndUrl\n          lhr={lhr}\n          baseLhr={baseLhr}\n          selectedAuditId={selectedAuditId}\n          hookElements={props.hookElements}\n          percentAbsoluteDeltaThreshold={percentAbsoluteDeltaThreshold}\n          setPercentAbsoluteDeltaThreshold={setDiffThreshold}\n        />\n        <div className=\"container\">\n          {props.hookElements.warnings}\n          {runtimeDiffAck !== 'closed' && runtimeDiffs.length ? (\n            <Paper className=\"position-relative\">\n              <LhrRuntimeDiff diffs={runtimeDiffs} variant=\"mini\" />\n              <div\n                className=\"lhr-comparison-runtime-diff__close\"\n                onClick={() => setRuntimeDiffAck('closed')}\n              >\n                <i className=\"material-icons\">close</i>\n              </div>\n            </Paper>\n          ) : null}\n          {auditGroups.length && baseLhr ? (\n            <Fragment>\n              {selectedAuditId ? null : (\n                <div className=\"lhr-comparison__legend-container\">\n                  <LhrComparisonLegend />\n                </div>\n              )}\n              <AuditGroups\n                showAsNarrow={!!selectedAuditId}\n                auditGroups={auditGroups}\n                baseLhr={baseLhr}\n                selectedAuditId={selectedAuditId}\n                setSelectedAuditId={setAuditId}\n              />\n            </Fragment>\n          ) : props.hookElements.warnings ? null : (\n            <Paper className=\"lhr-comparison__warning\">\n              <i className=\"material-icons\">sentiment_satisfied_alt</i>\n              <div>\n                Woah, no differences found! Switch base builds to explore other differences, or{' '}\n                <LhrViewerLink className=\"lhr-comparison__warning__lhr-link\" lhr={props.lhr}>\n                  jump straight to the Lighthouse report.\n                </LhrViewerLink>\n              </div>\n            </Paper>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n","/**\n * @license Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except in compliance with the License. You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport {h, Fragment} from 'preact';\nimport {useState, useMemo, useCallback} from 'preact/hooks';\nimport {Link, route} from 'preact-router';\nimport clsx from 'clsx';\nimport './build-view.css';\nimport * as _ from '@lhci/utils/src/lodash.js';\n\nimport {AsyncLoader, combineLoadingStates, combineAsyncData} from '../../components/async-loader';\nimport {\n  useBuild,\n  useOptionalBuildById,\n  useOptionalBuildRepresentativeRuns,\n  useAncestorBuild,\n  useProjectBySlug,\n} from '../../hooks/use-api-data';\nimport {BuildHashSelector} from './build-hash-selector';\nimport {BuildSelectorHeaderSection} from './build-selector-header-section';\nimport {Page} from '../../layout/page';\n\nimport {BuildViewWarnings, computeWarnings} from './build-view-warnings';\nimport {DocumentTitle} from '../../components/document-title';\nimport {LoadingSpinner} from '../../components/loading-spinner';\nimport {LhrComparison} from './lhr-comparison.jsx';\nimport {Dropdown} from '../../components/dropdown';\n\n/**\n * @param {{compareUrl?: string, runs: Array<LHCI.ServerCommand.Run>}} props\n * @param {Array<LHCI.ServerCommand.Run>} compareRuns\n * @return {string} */\nfunction computeSelectedUrl(props, compareRuns) {\n  if (props.compareUrl) return props.compareUrl;\n  if (!compareRuns.length) return '';\n\n  // Choose the shortest URL that exists in both of the builds fallingback to whatever was available in the compare.\n  const fallbackUrl = compareRuns[0].url;\n  const groupedUrls = _.groupBy(props.runs, run => run.url);\n  const urlsInBothRuns = groupedUrls\n    .filter(group => new Set(group.map(entry => entry.buildId)).size > 1)\n    .map(group => group[0].url)\n    .sort((a, b) => a.length - b.length);\n  return urlsInBothRuns[0] || fallbackUrl;\n}\n\n/** @param {{project: LHCI.ServerCommand.Project, build: LHCI.ServerCommand.Build, ancestorBuild: LHCI.ServerCommand.Build | null, runs: Array<LHCI.ServerCommand.Run>, compareUrl?: string, hasBaseOverride: boolean}} props */\nconst BuildView_ = props => {\n  const [openBuildHash, setOpenBuild] = useState(/** @type {null|'base'|'compare'} */ (null));\n  const [isOpenLhrLinkHovered, setLhrLinkHover] = useState(false);\n  const buildHashSelectorCloseFn = useCallback(() => setOpenBuild(null), [setOpenBuild]);\n\n  const compareRuns = props.runs.filter(run => run.buildId === props.build.id);\n  const selectedUrl = computeSelectedUrl(props, compareRuns);\n  const availableUrls = [...new Set(compareRuns.map(run => run.url))];\n  const run = compareRuns.find(run => run.url === selectedUrl);\n\n  const ancestorBuildId = props.ancestorBuild && props.ancestorBuild.id;\n  const baseRuns = props.runs.filter(run => run.buildId === ancestorBuildId);\n  const baseRun = baseRuns.find(run => run.url === selectedUrl);\n\n  /** @type {LH.Result|undefined} */\n  let lhr;\n  /** @type {LH.Result|undefined} */\n  let baseLhr;\n  /** @type {Error|undefined} */\n  let lhrError;\n\n  try {\n    lhr = useMemo(() => run && JSON.parse(run.lhr), [run]);\n  } catch (err) {\n    lhrError = err;\n  }\n\n  try {\n    baseLhr = useMemo(() => baseRun && JSON.parse(baseRun.lhr), [baseRun]);\n  } catch (err) {\n    lhrError = err;\n  }\n\n  if (!run || !lhr) {\n    return (\n      <Fragment>\n        <h1>No runs for build</h1>\n        <pre>\n          {lhrError}\n          {JSON.stringify(props, null, 2)}\n        </pre>\n      </Fragment>\n    );\n  }\n\n  const definedLhr = lhr;\n  const warningProps = {\n    lhr: definedLhr,\n    build: props.build,\n    baseBuild: props.ancestorBuild,\n    baseLhr: baseLhr,\n    hasBaseOverride: props.hasBaseOverride,\n  };\n\n  return (\n    <Page\n      headerLeft={\n        <Link href={`/app/projects/${props.project.slug}`}>\n          <i className=\"material-icons\">arrow_back</i>\n        </Link>\n      }\n      header={\n        <Fragment>\n          <BuildSelectorHeaderSection\n            build={props.ancestorBuild}\n            variant=\"base\"\n            lhr={baseLhr}\n            isDimmed={openBuildHash === 'compare'}\n            isOpen={openBuildHash === 'base'}\n            setLhrLinkHover={setLhrLinkHover}\n            onClick={() => setOpenBuild(openBuildHash === 'base' ? null : 'base')}\n          />\n          <BuildSelectorHeaderSection\n            build={props.build}\n            variant=\"compare\"\n            lhr={lhr}\n            isDimmed={openBuildHash === 'base'}\n            isOpen={openBuildHash === 'compare'}\n            setLhrLinkHover={setLhrLinkHover}\n            onClick={() => setOpenBuild(openBuildHash === 'compare' ? null : 'compare')}\n          />\n        </Fragment>\n      }\n      headerRight={\n        <a\n          href=\"https://github.com/GoogleChrome/lighthouse-ci\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <i className=\"material-icons\">info</i>\n        </a>\n      }\n    >\n      <DocumentTitle title={`Compare \"${props.build.commitMessage}\"`} />\n      {openBuildHash ? (\n        <BuildHashSelector\n          build={props.build}\n          ancestorBuild={props.ancestorBuild}\n          selector={openBuildHash}\n          lhr={lhr}\n          baseLhr={baseLhr}\n          baseBranch={props.project.baseBranch}\n          close={buildHashSelectorCloseFn}\n        />\n      ) : (\n        <Fragment />\n      )}\n      {(lhrError && <h1>Error parsing LHR ({lhrError.stack})</h1>) || <Fragment />}\n      <LhrComparison\n        lhr={lhr}\n        baseLhr={baseLhr}\n        className={clsx({'build-view--with-lhr-link-hover': isOpenLhrLinkHovered})}\n        hookElements={{\n          warnings: computeWarnings(warningProps).hasWarning ? (\n            <BuildViewWarnings {...warningProps} />\n          ) : (\n            undefined\n          ),\n          dropdowns: (\n            <Dropdown\n              label=\"URL\"\n              className=\"dropdown--url\"\n              value={selectedUrl}\n              setValue={url => {\n                const to = new URL(window.location.href);\n                to.searchParams.set('compareUrl', url);\n                route(`${to.pathname}${to.search}`);\n              }}\n              options={availableUrls.map(url => ({value: url, label: url}))}\n            />\n          ),\n        }}\n      />\n    </Page>\n  );\n};\n\n/** @param {{projectSlug: string, partialBuildId: string, baseBuild?: string, compareUrl?: string}} props */\nexport const BuildView = props => {\n  const projectLoadingData = useProjectBySlug(props.projectSlug);\n  const projectId = projectLoadingData[1] && projectLoadingData[1].id;\n  const buildLoadingData = useBuild(projectId, props.partialBuildId);\n  const buildId = buildLoadingData[1] && buildLoadingData[1].id;\n  const ancestorBuildData = useAncestorBuild(projectId, buildId);\n\n  const baseOverrideOptions = props.baseBuild ? props.baseBuild : null;\n  const baseOverrideData = useOptionalBuildById(projectId, baseOverrideOptions);\n\n  const baseBuildData = props.baseBuild ? baseOverrideData : ancestorBuildData;\n  const baseBuildId = baseBuildData[1] && baseBuildData[1].id;\n\n  const runData = useOptionalBuildRepresentativeRuns(projectId, buildId, null);\n\n  const baseRunData = useOptionalBuildRepresentativeRuns(\n    projectId,\n    baseBuildId === null ? 'EMPTY_QUERY' : baseBuildId,\n    null\n  );\n\n  return (\n    <AsyncLoader\n      loadingState={combineLoadingStates(\n        projectLoadingData,\n        buildLoadingData,\n        baseBuildData,\n        runData,\n        baseRunData\n      )}\n      asyncData={combineAsyncData(\n        projectLoadingData,\n        buildLoadingData,\n        baseBuildData,\n        runData,\n        baseRunData\n      )}\n      renderLoading={() => (\n        <Page>\n          <LoadingSpinner />\n        </Page>\n      )}\n      render={([project, build, ancestorBuild, runs, baseRuns]) => (\n        <BuildView_\n          project={project}\n          build={build}\n          compareUrl={props.compareUrl}\n          ancestorBuild={ancestorBuild}\n          runs={runs.concat(baseRuns)}\n          hasBaseOverride={!!props.baseBuild}\n        />\n      )}\n    />\n  );\n};\n"]}