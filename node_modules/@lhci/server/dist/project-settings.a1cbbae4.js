parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"SLfS":[function(require,module,exports) {

},{}],"J0IW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProjectSettings=void 0;var e=require("preact"),t=require("../../hooks/use-api-data"),a=require("../../components/async-loader"),s=require("../../layout/page"),r=require("../../components/document-title");require("./project-settings.css");var n=require("../../components/paper"),l=require("preact/hooks"),o=require("preact-router"),i=require("../../components/loading-spinner"),c=require("../../hooks/use-previous-value");const u=({project:a})=>{const s=(0,c.usePreviousValue)(a.id),[r,u]=(0,l.useState)(!1),[p,h]=(0,l.useState)(""),[d,m]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[v,y]=(0,t.useAdminToken)(a.id),[N,P]=(0,l.useState)(""),[x,S]=(0,l.useState)(""),b=()=>{P(""),S("")};if((0,l.useEffect)(()=>{a.id!==s&&(h(a.name),m(a.externalUrl),j(a.baseBranch))},[a.id,s]),r)return(0,e.h)(i.LoadingSpinner,null);const f=e=>t=>e(t.target instanceof HTMLInputElement?t.target.value:"");return(0,e.h)(e.Fragment,null,N?(0,e.h)(n.Paper,null,N):null,x?(0,e.h)(n.Paper,{className:"text--fail"},x):null,(0,e.h)(n.Paper,null,(0,e.h)("h2",null,"Administrative Settings"),(0,e.h)("label",{className:"form-item"},(0,e.h)("div",{className:"text--smaller"},"Project Name"),(0,e.h)("input",{placeholder:"Project",style:{minWidth:250},value:p,onChange:f(h),type:"text"})),(0,e.h)("label",{className:"form-item"},(0,e.h)("div",{className:"text--smaller"},"External URL"),(0,e.h)("input",{placeholder:"master",style:{minWidth:250},value:d,onChange:f(m),type:"text"})),(0,e.h)("label",{className:"form-item"},(0,e.h)("div",{className:"text--smaller"},"Base Branch"),(0,e.h)("input",{placeholder:"master",style:{minWidth:250},value:g,onChange:f(j),type:"text"})),(0,e.h)("label",{className:"form-item"},(0,e.h)("div",{className:"text--smaller"},"Admin Token"),(0,e.h)("input",{placeholder:"[REQUIRED] Paste admin token here",style:{minWidth:250},value:v||"",onChange:f(y),type:"text"})),(0,e.h)("div",{className:"form-item"},(0,e.h)("button",{type:"button",disabled:!v||!g,onClick:()=>{b(),u(!0),t.api.setAdminToken(v),t.api.updateProject({id:a.id,name:p,externalUrl:d,baseBranch:g}).then(()=>{P("Project updated successfully!"),u(!1)}).catch(e=>{S("Failed to save project (".concat(e.message,")")),u(!1)})}},"Save"),(0,e.h)("span",{className:"h-spacer"}),(0,e.h)("button",{type:"button",disabled:!v,onClick:()=>{confirm(["Are you sure you want to permanently delete this project?","You will lose access to all builds, statistics, and Lighthouse report data.","This action CANNOT BE UNDONE."].join(" "))&&(b(),u(!0),t.api.setAdminToken(v),t.api.deleteProject(a.id).then(()=>(0,o.route)("/app/projects")).catch(e=>{S("Failed to delete project (".concat(e.message,")")),u(!1)}))}},"Delete Project"))))},p=n=>{const[l,o]=(0,t.useProjectBySlug)(n.projectSlug);return(0,e.h)(s.Page,null,(0,e.h)(r.DocumentTitle,{title:"Project Settings"}),(0,e.h)("div",{className:"project-settings container"},(0,e.h)(a.AsyncLoader,{loadingState:l,asyncData:o,render:t=>(0,e.h)(u,{project:t})})))};exports.ProjectSettings=p;
},{"preact":"PBm5","../../hooks/use-api-data":"Xxih","../../components/async-loader":"XB7O","../../layout/page":"yJiI","../../components/document-title":"DxBM","./project-settings.css":"SLfS","../../components/paper":"QhNa","preact/hooks":"o0eE","preact-router":"K0uB","../../components/loading-spinner":"A2SG","../../hooks/use-previous-value":"INeX"}]},{},[], null)
//# sourceMappingURL=/app/project-settings.a1cbbae4.js.map